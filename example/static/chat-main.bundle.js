webpackJsonp([1],{

/***/ "./src/css/chat.css":
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY3NzL2NoYXQuY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2Nzcy9jaGF0LmNzcz83ZGY0Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY3NzL2NoYXQuY3NzXG4vLyBtb2R1bGUgaWQgPSAuL3NyYy9jc3MvY2hhdC5jc3Ncbi8vIG1vZHVsZSBjaHVua3MgPSAxIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/css/chat.css\n");

/***/ }),

/***/ "./src/js/chat.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(\"./node_modules/jquery/dist/jquery.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery_ui_ui_widgets_tabs__ = __webpack_require__(\"./node_modules/jquery-ui/ui/widgets/tabs.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_jquery_ui_ui_widgets_tabs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_jquery_ui_ui_widgets_tabs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_jquery_ui_ui_widgets_dialog__ = __webpack_require__(\"./node_modules/jquery-ui/ui/widgets/dialog.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_jquery_ui_ui_widgets_dialog___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_jquery_ui_ui_widgets_dialog__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery_ui_ui_widgets_button__ = __webpack_require__(\"./node_modules/jquery-ui/ui/widgets/button.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_jquery_ui_ui_widgets_button___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_jquery_ui_ui_widgets_button__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_jquery_ui_ui_position__ = __webpack_require__(\"./node_modules/jquery-ui/ui/position.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_jquery_ui_ui_position___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_jquery_ui_ui_position__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_jquery_ui_themes_base_core_css__ = __webpack_require__(\"./node_modules/jquery-ui/themes/base/core.css\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_jquery_ui_themes_base_core_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_jquery_ui_themes_base_core_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_jquery_ui_themes_base_tabs_css__ = __webpack_require__(\"./node_modules/jquery-ui/themes/base/tabs.css\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_jquery_ui_themes_base_tabs_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_jquery_ui_themes_base_tabs_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_jquery_ui_themes_base_menu_css__ = __webpack_require__(\"./node_modules/jquery-ui/themes/base/menu.css\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_jquery_ui_themes_base_menu_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_jquery_ui_themes_base_menu_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_jquery_ui_themes_base_dialog_css__ = __webpack_require__(\"./node_modules/jquery-ui/themes/base/dialog.css\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_jquery_ui_themes_base_dialog_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_jquery_ui_themes_base_dialog_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_jquery_ui_themes_base_button_css__ = __webpack_require__(\"./node_modules/jquery-ui/themes/base/button.css\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_jquery_ui_themes_base_button_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_jquery_ui_themes_base_button_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_malihu_custom_scrollbar_plugin__ = __webpack_require__(\"./node_modules/malihu-custom-scrollbar-plugin/src/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_ui_contextmenu__ = __webpack_require__(\"./node_modules/ui-contextmenu/jquery.ui-contextmenu.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_ui_contextmenu___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_ui_contextmenu__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_markdown_it__ = __webpack_require__(\"./node_modules/markdown-it/index.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_markdown_it___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_markdown_it__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_sockjs_client__ = __webpack_require__(\"./node_modules/sockjs-client/lib/entry.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_sockjs_client___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_sockjs_client__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__polyfills__ = __webpack_require__(\"./src/js/polyfills.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__polyfills___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14__polyfills__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__define_user__ = __webpack_require__(\"./src/js/define-user.js\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__css_chat_css__ = __webpack_require__(\"./src/css/chat.css\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__css_chat_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16__css_chat_css__);\n// jQuery and jQuery-ui\n\n\n\n\n\n\n\n\n\n\n\n// mCustomScrollbar\n\nObject(__WEBPACK_IMPORTED_MODULE_10_malihu_custom_scrollbar_plugin__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_0_jquery___default.a);\n\n// Context Menu\n\n\nwindow.$ = window.jQuery = __WEBPACK_IMPORTED_MODULE_0_jquery___default.a;\n\n// Markdown-it\n\nvar md = new __WEBPACK_IMPORTED_MODULE_12_markdown_it___default.a({\n    linkify: true,\n    typographer: true\n}).disable('image');\n// Via https://github.com/markdown-it/markdown-it/blob/e6f19eab4204122e85e4a342e0c1c8486ff40c2d/docs/architecture.md\nvar defaultRender = md.renderer.rules.link_open || function(tokens, idx, options, env, self) {\n  return self.renderToken(tokens, idx, options);\n};\nmd.renderer.rules.link_open = function(tokens, idx, options, env, self) {\n  // If you are sure other plugins can't add `target` - drop check below\n  var aIndex = tokens[idx].attrIndex('target');\n\n  if (aIndex < 0) {\n    tokens[idx].attrPush(['target', '_blank']); // add new attribute\n  } else {\n    tokens[idx].attrs[aIndex][1] = '_blank';    // replace value of existing attr\n  }\n\n  // pass token to default renderer.\n  return defaultRender(tokens, idx, options, env, self);\n};\n\n// Create an instance of markdown-it with no rules enabled, using it just to strip/sanitize HTML\nvar mdSanitizer = new __WEBPACK_IMPORTED_MODULE_12_markdown_it___default.a('zero');\n\n// SockJS\n\n\n// Our assets\n\n\n\n\n// Username, if not logged in \"Annonymous\"\nvar USERNAME = __WEBPACK_IMPORTED_MODULE_15__define_user__[\"b\" /* CURRENT_USER */] ? __WEBPACK_IMPORTED_MODULE_15__define_user__[\"b\" /* CURRENT_USER */].name : \"Anonymous\";\n// User ID, if not logged in \"0\"\nvar UID = __WEBPACK_IMPORTED_MODULE_15__define_user__[\"b\" /* CURRENT_USER */] ? __WEBPACK_IMPORTED_MODULE_15__define_user__[\"b\" /* CURRENT_USER */].uid : 0;\n// Replace invalid IRC nick characters with \"-\" (or _ if first char), limit its length (max is 32, minux 2 for __ and minus a max of 3 for ^##, then subtract the UID length), and add UID and initial connection number\nvar NICK = USERNAME.replace(/^[^a-zA-Z\\x5B-\\x60\\x7B-\\x7D]/, \"_\").replace(/[^a-zA-Z\\x5B-\\x60\\x7B-\\x7D\\d-]/g, \"-\").substr(0, 27-String(UID).length) + \"__\" + UID + \"^1\";\n// If no channel has been specified via development-user, connect to #global\nvar CHANNEL = __WEBPACK_IMPORTED_MODULE_15__define_user__[\"a\" /* CHAT_CHANNEL */];\n// Set via the USERHOST call (response 302/RPL_USERHOST) send after the numeric 001/RPL_WELCOME is received\nvar HOSTNAME = undefined;\n\n// Online users\nvar onlineUsers = [];\n\nvar failedAttempts = 1;\nvar disconnectionTimers = [5, 10, 15, 30];\nvar currentTimer = 0;\nvar timerInterval;\n\nvar postedMessages = [];\nvar toBePosted = [];\nvar connected = false;\nvar firstConnection = true;\n\n// Initialize saved preferences\ntry {\n    var persistantSettings = localStorage;\n} catch(e) {\n    console.warn(\"Local storage not available (either unsupported or permission denied) - user preferences will not be saved\");\n    var persistantSettings = {}\n}\nvar ignoredUsers = persistantSettings.chatIgnored ? persistantSettings.chatIgnored.split(\",\") : [];\n// Chat should start automaticcally scrolling as new messages come in\nvar chatAutoScroll = \"bottom\";\n\nvar sock;\n\n//DEBUG ONLY\nfunction getSock() {\n    return sock;\n}\n\n/**\n *  Parse messages sent by server\n *  @param data: Raw data sent by server\n *  @return: Array of parsed messages\n */\nfunction parseCommands(data) {\n    var msgs, portions;\n    // Split into individual messages (commands)\n    msgs = data.split(\"\\r\\n\");\n    // The presence of \\r\\n at the end causes an extra element, remove it\n    msgs.pop();\n    for (var i=0; i<msgs.length; i++) {\n        // Split into prefix, command, params, and trailer (does not represent RFC1459/2812 specs, only what's needed to parse)\n        portions = msgs[i].match(/(?::([^ ]+) )?([^ ]+)((?: (?:[^ :])[^ ]*)*)?(?: :(.+))?/);\n        msgs[i] = {};\n        msgs[i].origin = portions[1];\n        msgs[i].command = portions[2];\n        // Fill in params, if a trailer exists, append it (if there are no normal params, sure there's an array)\n        msgs[i].params = [];\n        if (portions[3]) {\n            msgs[i].params = msgs[i].params.concat(portions[3].trim().split(\" \"));\n        }\n        if (portions[4]) {\n            msgs[i].params.push(portions[4]);\n        }\n    }\n    return msgs;\n}\n\n/**\n *  Returns object of onlineUsers which has the given username\n *  @param username: Nick of user to search for\n *  @return: Found element of onlineUsers\n */\nfunction onlineUserWithName( username ) {\n    var res = __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.grep(onlineUsers, function(o){ return o.name==username.toLowerCase(); })[0];\n    if(!res) return false;\n    res.index = onlineUsers.indexOf(res);\n    return res;\n}\n\n/**\n *  When a user joins, make sure they're on the online list\n *  @param username: Nick of joining user\n */\nfunction addUser( username ) {\n    var portions, uid, userli;\n    var usernamesToIgnore = [\"Anonymous\", \"history\", \"ChatBot\"];\n    var ircIds = {\n        hoglahoo: 36921,\n        Nando: 49507,\n        machinelves: 2577,\n        LinkBot: 126938,\n        LFP6: 48290,\n        jnicol: 48166,\n        staryjess: 11775,\n        bro: 24263,\n        brourd: 24263\n    };\n\n    // Parse automatic suffix\n    portions = username.match(/(?:^(.+)(?:__(\\d+)\\^\\d+))|(.+)/);\n    // If userid is included, get it, if it's an IRC regular, get their userID from the list\n    uid = portions[2]|| ircIds[username] || 0;\n    // Get actual username\n    username = portions[1] || portions[3];\n    // Remove @ from Op's username\n    if (username[0] == \"@\") {\n        username = username.slice(1);\n    }\n\n    // If the user isn't online and isn't to be ignored, add it to the page in the right place and keep track of it\n    if (usernamesToIgnore.includes(username)) return;\n\n    if (!onlineUserWithName(username)) {\n        onlineUsers.push({ name: username.toLowerCase(), connections: 1, id: uid });\n        onlineUsers.sort(function(userA, userB){\n            if (userA.name < userB.name) return -1;\n            if (userA.name > userB.name) return 1;\n            return 0;\n        });\n\n        userli = '<li id=\"chat-userlist-user-{USERNAME_LOW}\" class=\"chat-userlist-user\"><a target=\"_blank\" href=\"http://{WORKBRANCH}/web/player/{UID}/\">{USERNAME}</a>{OPTS}</li>';\n        userli = userli.replace('{USERNAME_LOW}', username.toLowerCase())\n                       .replace('{USERNAME}', username)\n                       .replace('{UID}', uid)\n                       .replace(\"{OPTS}\", USERNAME !== \"Anonymous\" ? '<a class=\"chat-message-options\">&vellip;</a>' : \"\")\n                       .replace(\"{WORKBRANCH}\", __WEBPACK_IMPORTED_MODULE_15__define_user__[\"c\" /* WORKBRANCH */]);\n\n        // If there's a user ahead of this one in the array, insert it before that one in the list, else add to the end\n        if (onlineUsers[onlineUserWithName(username).index+1]) {\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()( userli ).insertBefore( \"li#chat-userlist-user-\" + onlineUsers[onlineUserWithName(username).index+1][\"name\"] );\n        } else {\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-users-list\").append(userli);\n        }\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-users-online\").html(parseInt(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-users-online\").html()) + 1);\n    } else {\n        onlineUsers[onlineUserWithName(username).index][\"connections\"]++;\n    }\n}\n\n/**\n *  When a user leaves, remove them from the list\n *  @param username: Nick of parting/quitting user\n */\nfunction removeUser( username ) {\n    var usernamesToIgnore = [\"Anonymous\", \"history\", \"ChatBot\"];\n\n    username = username.match(/(?:^(.+)(?:__(\\d+)\\^\\d+))|(.+)/);\n    // Get actual username\n    username = username[1] || username[3];\n    // Remove @ from Op's username\n    if (username[0] == \"@\") {\n        username = username.slice(1);\n    }\n\n    if (usernamesToIgnore.includes(username)) return;\n\n    if (onlineUsers[onlineUserWithName(username).index][\"connections\"] == 1) {\n        onlineUsers.splice(onlineUserWithName(username).index, 1);\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"li#chat-userlist-user-\" + username.toLowerCase()).remove();\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-users-online\").html(parseInt(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-users-online\").html()) - 1);\n    } else {\n        onlineUsers[onlineUserWithName(username).index][\"connections\"]--;\n    }\n}\n\n/**\n *  HTML escape regular expression\n *  @param search: Regex search stirng\n *  @param mod: Regex modifier string\n *  @return: Encoded regex\n */\nfunction encodedRegex( search ) {\n    var mod= '';\n    if (search.global) {mod += \"g\";}\n    if (search.multiline) {mod += \"m\";}\n    if (search.ignoreCase) {mod += \"i\";}\n\n    return new RegExp(search.source.replace(/&/g, \"&amp;\")\n                                   .replace(/</g, \"&lt;\")\n                                   .replace(/>/g, \"&gt;\")\n                                   .replace(/\"/g, \"&quot;\")\n                                   .replace(/'/g, \"&#x27;\")\n                                   .replace(/\\//g, \"&#x2F;\"),\n                      mod);\n}\n\n/**\n *  Add color to a username based on the UID in the message or font tags\n *  @param data: Username to be colored\n *  @param uid: UID to use for determining default color\n *  @param isAction: boolean indicating if the message is an action. May need to be reworked once Flash chat is dropped to better coincide with IRC specs\n *  @return: Formatted username HTML\n */\nfunction colorizeUser ( data, uid, isAction ) {\n    var colors = [\"#f39191\", \"#f39691\", \"#f39b91\", \"#f39f91\", \"#f3a491\", \"#f3a891\", \"#f3ad91\", \"#f3b191\", \"#f3b691\", \"#f3ba91\", \"#f3bf91\", \"#f3c491\", \"#f3c891\", \"#f3cd91\", \"#f3d191\", \"#f3d691\", \"#f3da91\", \"#f3df91\", \"#f3e491\", \"#f3e891\", \"#f3ed91\", \"#f3f191\", \"#f0f391\", \"#ebf391\", \"#e7f391\", \"#e2f391\", \"#ddf391\", \"#d9f391\", \"#d4f391\", \"#d0f391\", \"#cbf391\", \"#c7f391\", \"#c2f391\", \"#bef391\", \"#b9f391\", \"#b4f391\", \"#b0f391\", \"#abf391\", \"#a7f391\", \"#a2f391\", \"#9ef391\", \"#99f391\", \"#94f391\", \"#91f393\", \"#91f398\", \"#91f39c\", \"#91f3a1\", \"#91f3a5\", \"#91f3aa\", \"#91f3ae\", \"#91f3b3\", \"#91f3b7\", \"#91f3bc\", \"#f391ba\", \"#f391b6\", \"#f391b1\", \"#f391ad\", \"#f391a8\", \"#f391a4\", \"#f3919f\", \"#f3919b\", \"#f39196\"];\n    // Find escaped font tags, and replace them with a span and the hex color signified, if it's an action remove the tag\n    var customColored = data.replace(/&lt;font color=(?:&#x27;|\\&quot;)?(#[a-fA-F\\d]{6})(?:&#x27;|\\&quot;)?&gt;(.+)&lt;\\/font&gt;/i, isAction ? '$2':'<span style=\"color:$1;\">$2</span>')\n    // Construct span, if it's an action omit the coloring\n    return '<a target=\"_blank\" class=\"chat-message-user-link\" href=\"http://' + __WEBPACK_IMPORTED_MODULE_15__define_user__[\"c\" /* WORKBRANCH */] + '/web/player/' + uid + '/\"><span class=\"chat-message-user\" ' + (isAction ? '' : 'style=\"color:' + colors[uid % colors.length] + ';\"') + '>' + customColored + '</span></a>' + (!isAction ? ': ' : ' ');\n}\n\n/**\n *  Format the current time to a Flash-chat compatible timestamp\n *  @param time: Timestamp at beginning of message\n *  @return: Formatted timestamp\n */\nfunction formatTime( string ) {\n    // Construct date from string, get the time\n    return new Date(Date.parse(string)).toTimeString().replace(/(\\d{2}):(\\d{2}).+/, function(match, hour, minutes) {\n        // Format to non-millitary, add brackets\n        return \"[\" + (hour%12||12) + \":\" + minutes + \" \" + (hour > 11 ? \"PM\" : \"AM\") + \"]\";\n    });\n}\n\n/**\n *  Display a message in the chat window\n *  @param raw_msg: The contents of the privmsg to be posted\n *  @param isHistory: If true, it should be pushed at the top, as it is an older message (and may be coming in late)\n *\n */\nfunction postMessage( raw_msg, isHistory ) {\n    if (!isHistory && !connected) {\n        toBePosted.push(raw_msg);\n        return;\n    }\n    postedMessages.push(raw_msg.trim());\n\n    var parts, prefix, uid, name, time, isAction, message, classes = '';\n    // In a readable format, the regex looks like: ((UID)_(Display Name)_(Date/Time)_)?(Message)\n    // Time format: ShortDay ShortMonth Date HH:MM:SS Year UTC\n    parts = raw_msg.match(/((\\d+)_(.+)_((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) [0-3]?\\d [0-2]\\d(?::[0-6]\\d){2} \\d{4} UTC)_)?(.+)/);\n    prefix = parts[1];\n    uid = parts[2];\n    name = parts[3];\n    time = parts[4];\n    raw_msg = parts[5];\n    // TODO: In the future, remove this, it's due to Flash chat's pre-escaping before sending.\n    raw_msg = raw_msg.replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\");\n    // TODO: Eventually remove, only needed for Flash chat compatible /me (once the Flash app is removed ACTION should be used)\n    raw_msg = raw_msg.replace(/<I>(.+)<\\/I>/g, '$1');\n    // TODO: Because of how chat works right now, we can only handle the inline styles,\n    // but some of the block-level pieces could be nice too once we have multiline messages (lists, blockquotes, and fences mostly).\n    // Also, the `code` should be styled (ie have a background color and maybe a different text color), and it currently isn't.\n    // Images are also disabled, as we currently don't have a way to format them properly.\n    raw_msg = md.renderInline(raw_msg);\n\n\n    // Don't show messages from user on ignore list\n    if ( ignoredUsers.includes(name) ){return;}\n\n    // For /me\n    // NOTE: May need to be reworked once Flash chat is dropped to better coincide with IRC specs\n    isAction = raw_msg.startsWith(\"ACTION \") || name ? name.match(/<I><FONT COLOR=\"#C0DCE7\">(.*)<\\/FONT><\\/I>/) : false;\n    raw_msg = raw_msg.replace(/ACTION /, '');\n\n    // Determine possible message classes\n    if (isAction) { classes += \" chat-message-action\"; }\n    if (!prefix) { classes += \" chat-message-system\"; }\n\n    // Fill template and post\n    message = '<li class=\"chat-message{MSG_CLASS}\"><div class=\"chat-message-content\">{USER}&lrm;<span class=\"chat-message-message\">{MESSAGE}</span><span class=\"chat-message-time\"> &lrm;{TIME}</span></div>{OPTS}</li>';\n    message = message.replace(\"{MSG_CLASS}\", classes)\n                     // TODO: Eventually remove the italicise replacement, only needed for Flash chat compatible /me (once the Flash app is removed ACTION should be used)\n                     .replace(\"{USER}\", prefix ? colorizeUser(mdSanitizer.renderInline(name.replace(/<I>(.+)<\\/I>/g, '$1')), uid, isAction) : '')\n                     .replace(\"{MESSAGE}\", raw_msg)\n                     .replace(\"{OPTS}\", USERNAME !== \"Anonymous\" ? '<a class=\"chat-message-options\">&vellip;</a>' : \"\")\n                     .replace(\"{TIME}\", prefix ? formatTime(time) : '');\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#global-chat-messages\").append(message);\n    setTimeout(function(){\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tab-global\").mCustomScrollbar(\"scrollTo\", chatAutoScroll, {callbacks: false});\n    }, 100);\n}\n\n/**\n * Adds the user to the current user's ignore list\n * @param user: Username to add to the ignore list\n */\nfunction ignoreUser(user) {\n    if (!ignoredUsers.includes(user)) {\n        ignoredUsers.push(user);\n        persistantSettings.chatIgnored = ignoredUsers;\n        postMessage(\"Ignored \" + user + \". To unignore this user, either use the options menu again (on a message or the user list) or type /unignore \" + user);\n    } else {\n        postMessage(user + \" has already been ignored\");\n    }\n}\n\n/**\n * Remove the user to the current user's ignore list\n * @param user: Username to remove from the ignore list, or `*` to clear the list entirely\n */\nfunction unignoreUser(user) {\n    if (user == \"*\") {\n        ignoredUsers = [];\n        postMessage(\"Unignored all\");\n    } else {\n        ignoredUsers.splice(ignoredUsers.indexOf(user), 1);\n        postMessage(\"Unignored \" + user);\n    }\n    persistantSettings.chatIgnored = ignoredUsers;\n}\n\n/**\n * Close report dialog and reset its contents\n */\nfunction closeReportDialog() {\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-dialog\").dialog(\"close\");\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-message\").val(\"\");\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-message\").parent().hide();\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-report, #report-ignore\").prop(\"checked\", false);\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-username\").val(\"\");\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-uid\").val(\"\");\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-time\").val(\"\");\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-offending-message\").val(\"\");\n}\n\n/**\n * Get username from the element a passed message options element is attached to,\n * be it a message or a user list item\n * @param target: Message options DOM element\n */\nfunction usernameFromOptions(target) {\n    var container = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(target).parent();\n    if (container.hasClass('chat-message')) {\n        return container.children(\".chat-message-content\").children(\".chat-message-user-link\").text();\n    } else if (container.hasClass('chat-userlist-user')) {\n        return container.children().eq(0).text();\n    }\n\n    throw new Error('Unhandled options target');\n}\n\n__WEBPACK_IMPORTED_MODULE_0_jquery___default()(document).ready(function() {\n    document.addEventListener(\"visibilitychange\", function() {\n        if('visible' === document.visibilityState)\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tab-global\").mCustomScrollbar(\"scrollTo\", chatAutoScroll, {callbacks: false});\n    });\n\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#minimization-triangle').click(toggleVisibility);\n\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#disconnect\").click(function() {\n        sock.close();\n    });\n\n    initSock();\n    // Initialize UI\n    // Initialize tabs\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()( \"#chat\" ).tabs({\n        activate: function( event, ui ) {\n            if (ui) {\n                if (ui.newPanel[0].id == \"chat-tab-global\") {\n                    setTimeout(function(){\n                        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tab-global\").mCustomScrollbar(\"scrollTo\", chatAutoScroll, {callbacks: false});\n                    }, 100);\n                }\n            }\n        }\n    });\n    // Initialize scrollbar\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()( \"#chat-tabs\" ).children().mCustomScrollbar({\n        // No fancy animation, it makes it feel awkward\n        scrollInertia: 0,\n        mouseWheelPixels: 100,\n        callbacks: {\n            // The user has scrolled, so don't automatically move to the bottom on a new message\n            onScroll: function() {\n                if (__WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tab-global\").css('display') !== 'none') {\n                    chatAutoScroll = this.mcs.top;\n                }\n            },\n            // We've hit the bottom, resume scrolling\n            onTotalScroll: function() {\n                if (__WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tab-global\").css('display') !== 'none') {\n                    chatAutoScroll = \"bottom\";\n                }\n            }\n        }\n    });\n    // Fill out max length of message\n    // Breakdown - IRC server max: 324, timestamp: 28, underscores: 3, max length of username formatting (for /me, discounting the 3 characters for the command): 40, username: dynamic, UID: dynamic\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-input\").prop(\"maxLength\", 253 - UID.toString().length - USERNAME.length);\n    // `[Report] ` is simply added at the beginning of messages\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-message\").prop(\"maxLength\", 324 - 9);\n\n    // Auto-resize chat input (adapted from https://www.impressivewebs.com/textarea-auto-resize/)\n    // Set up input and duplicated div\n    var input = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#chat-input'),\n    hiddenDiv = '<div id=\"chat-input-hidden\"></div>',\n    content = null;\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(hiddenDiv).insertAfter(\"#chat-input\");\n    hiddenDiv = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-input-hidden\");\n    input.css(\"overflow\", \"hidden\");\n\n    input.on('keydown keypress keyup', function() {\n        content = md.renderInline(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).val());\n        // Fill content apropriately\n        content = content.replace(/\\n/g, '<br>');\n        hiddenDiv.html(content + '');\n        // Determine height from duplicate div\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).css('height', hiddenDiv.height());\n    });\n    // Message options menu\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tabs\").contextmenu({\n        delegate: \".chat-message-options\",\n        preventSelect: true,\n        autoTrigger: false,\n        addClass: \"message-options-menu\",\n        position: {my: \"right-10 center-15\"},\n        menu: [\n            {title: \"User Options\", cmd:\"header\", isHeader: true},\n            {title: \"Report User/Message\", cmd: \"report\"},\n            {title: \"Ignore User\", cmd: \"ignore\", disabled: function(event, ui) { return ignoredUsers.includes(usernameFromOptions(ui.target)) ? 'hide' : false }},\n            {title: \"Unignore User\", cmd: \"unignore\", disabled: function(event, ui){ return !ignoredUsers.includes(usernameFromOptions(ui.target)) ? 'hide' : false}},\n        ],\n        beforeOpen: function(event, ui) {\n          __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tabs\").contextmenu(\"setTitle\", \"header\", usernameFromOptions(ui.target));\n        },\n        select: function(event, ui) {\n            switch (ui.cmd) {\n                case \"report\":\n                    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-report\").click();\n                    break;\n                case \"ignore\":\n                    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-ignore\").click();\n                    break;\n                case \"unignore\":\n                    unignoreUser(usernameFromOptions(ui.target));\n                    return;\n            }\n            if (__WEBPACK_IMPORTED_MODULE_0_jquery___default()(ui.target).parent().hasClass('chat-message')) {\n                var msg = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(ui.target).parent().children(\".chat-message-content\");\n                __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-username\").val(usernameFromOptions(ui.target));\n                __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-uid\").val(msg.children(\".chat-message-user-link\").prop(\"href\").match(/player\\/(\\d+)/)[1]);\n                var time = msg.children(\".chat-message-time\").text().match(/(\\d+):(\\d+) ((AM)|(PM))/);\n                __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-time\").val(\n                    // Using a random date, as we only need the time\n                    new Date(\"Jan 1 2000 \" + time[1] + \":\" + time[2] + \" \" + time[3])\n                    .toUTCString().match(/(?:\\d+:?)+ GMT$/)[0].replace(\"GMT\", \"UTC\")\n                );\n                __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-offending-message\").val(msg.children(\".chat-message-message\").text());\n            } else if (__WEBPACK_IMPORTED_MODULE_0_jquery___default()(ui.target).parent().hasClass('chat-userlist-user')) {\n                __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-username\").val(usernameFromOptions(ui.target));\n                __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-uid\").val(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(ui.target).parent().children().eq(0).prop(\"href\").match(/player\\/(\\d+)/)[1]);\n            }\n\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-dialog\").dialog(\"open\");\n        }\n    });\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tabs\").on(\"click\", \".chat-message-options\", function() {\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tabs\").contextmenu(\"open\", __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this));\n    });\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-dialog\").dialog({\n        dialogClass: \"report-dialog\",\n        autoOpen: false,\n        minHeight: 0,\n        width: \"100%\",\n        position: {at: 'center center-30px'}\n    });\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-report\").click(function() {\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-message\").parent().toggle();\n    });\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-cancel\").click(closeReportDialog);\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-submit\").click(function() {\n        if (__WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-ignore\").prop(\"checked\") == true) {\n            ignoreUser(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-username\").val());\n        }\n\n        if (__WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-report\").prop(\"checked\") == true) {\n            sock.send(\n                \"PRIVMSG #ops-notifications :[REPORT] Reporting {username} ({uid}) by {curr_username} ({curr_uid}).\\r\\n\"\n                .replace(\"{username}\", __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-username\").val())\n                .replace(\"{uid}\", __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-uid\").val())\n                .replace(\"{time}\", __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-time\").val() != '' ? \" Reported message sent at \" + __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-time\").val() : '')\n                .replace(\"{curr_username}\", USERNAME)\n                .replace(\"{curr_uid}\", UID)\n            );\n            if (__WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-offending-message\").val() != '') {\n                sock.send(\"PRIVMSG #ops-notifications :[REPORTED MESSAGE] \" + __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-offending-message\").val() + \"\\r\\n\");\n            }\n            sock.send(\"PRIVMSG #ops-notifications :[REPORT REASON] \" + __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#report-message\").val() + \"\\r\\n\");\n        }\n\n        closeReportDialog();\n    })\n    // Key bindings\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#chat-input').keypress(function(e) {\n        if (e.which == 13) {\n            // Hit enter in chat\n            sendMessage(__WEBPACK_IMPORTED_MODULE_0_jquery___default()('#chat-input').val());\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#chat-input').val('');\n            return false;\n        }\n    });\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#reconnect\").click(initSock);\n\n});\n\nfunction sendMessage(message){\n    var isAction = false;\n    var channel = \"#\" + CHANNEL;\n    // No posting as annon or if nothing has been actually posted\n    if (USERNAME !== \"Anonymous\" && message.trim() !== '') {\n        var message = message;\n        var post = true;\n        // Chat commands\n        if (message.startsWith(\"/\")) {\n            var post = false;\n            var command = message.match(/^\\/([^ ]+)/)[1];\n            try {\n                var params = message.match(/^\\/\\w+ (.+)/)[1];\n            } catch(e){}\n            switch (command) {\n                case \"help\":\n                    switch(params) {\n                        case \"me\":\n                            postMessage(\"/me: Posts message formatted as an action\")\n                            postMessage(\"Usage: /me <message>\");\n                            postMessage(\"Example: /me laughs\");\n                            break;\n                        case \"ignore\":\n                            postMessage(\"/ignore: Don't show messages from a particular user. Show currently ignored users with /ignore-list. Unignore user with /unignore.\")\n                            postMessage(\"Usage: /ignore <username>\");\n                            postMessage(\"Example: /ignore player1\");\n                            break;\n                        case \"ignore-list\":\n                            postMessage(\"/ignore-list: Shows currently ignored users. Ignore a user with /ignore. Unignore user with /unignore.\")\n                            postMessage(\"Usage: /ignore-list\");\n                            postMessage(\"Example: /ignore-list\");\n                            break;\n                        case \"unignore\":\n                            postMessage(\"/unignore: Shows messages from a user after being igored. Unignores all users when username is *. Ignore a user with /ignore. Show currently ignored users with /ignore-list.\")\n                            postMessage(\"Usage: /unignore <username>\");\n                            postMessage(\"Example: /unignore player1\");\n                            postMessage(\"Example: /unignore *\");\n                            break;\n                        default:\n                            postMessage(\"Available commands: help, me, ignore, ignore-list, unignore\");\n                            postMessage(\"Type /help <command> for information on individual commands\");\n                            postMessage(\"Example: /help me\");\n                            postMessage(\"Additional commands available via LinkBot (see the [wiki](http://eternawiki.org/wiki/index.php5/HELP) for more information)\");\n                            break;\n                    }\n                    break;\n                case \"me\":\n                    if (!params){ postMessage(\"Please include command parameters. Type /help me for usage instructions\"); break; }\n                    isAction = true;\n                    post = true;\n                    message = params;\n                    break;\n                case \"ignore\":\n                    if (!params){ postMessage(\"Please include command parameters. Type /help ignore for more usage instructions\"); break; }\n                    ignoreUser(params);\n                    break;\n                case \"ignore-list\":\n                    postMessage(\"Currently ignored users: \" + ignoredUsers.join(\", \"));\n                    break;\n                case \"unignore\":\n                    if (!params){ postMessage(\"Please include command parameters. Type /help unignore for more usage instructions\"); break; }\n                    unignoreUser(params)\n                    break;\n                default:\n                    postMessage(\"Invalid command. Type /help for more available commands\");\n                    break;\n            }\n        }\n\n        if (post) {\n            // So Flash chat doesn't break\n            message = message.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n            // Format time to work with Flash chat\n            // TODO: Could use a refactor, might be able to remove this necessity after Flash is removed)\n            if (isAction) {\n                message = UID + '_<I><FONT COLOR=\"#C0DCE7\">' + USERNAME + \"</FONT></I>_\" + new Date().toUTCString().replace(/(Mon|Tue|Wed|Thu|Fri|Sat|Sun), ([0-3]\\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\\d{4}) ([0-2]\\d(?::[0-6]\\d){2}) GMT/, \"$1 $3 $2 $5 $4 UTC\") + \"_<I>\" + message + \"</I>\";\n            } else {\n                message = UID + \"_\" + USERNAME + \"_\" + new Date().toUTCString().replace(/(Mon|Tue|Wed|Thu|Fri|Sat|Sun), ([0-3]\\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\\d{4}) ([0-2]\\d(?::[0-6]\\d){2}) GMT/, \"$1 $3 $2 $5 $4 UTC\") + \"_\" + message;\n            }\n            sock.send(\"PRIVMSG \" + channel + \" :\" + message + \"\\r\\n\");\n            postMessage(message, false);\n        }\n    }\n}\n\nfunction initSock() {\n    clearInterval(timerInterval);\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#reconnect\").addClass(\"active\");\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#reconnect\").prop('onclick', null);\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-loading > #connecting\").show();\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-loading > #failed\").hide();\n\n    sock = new __WEBPACK_IMPORTED_MODULE_13_sockjs_client___default.a(\"https://irc.eternagame.org/chatws\", [], { transports: ['websocket', 'xhr-streaming', 'xdr-streaming', 'eventsource', 'iframe-eventsource', 'htmlfile', 'iframe-htmlfile', 'xhr-polling', 'xdr-polling', 'iframe-xhr-polling'] });\n    // Initial Chat Connection\n    sock.onopen = function() {\n        sock.send(\"NICK \" + NICK + \"\\r\\n\");\n        sock.send(\"USER \" + \"anon\" + \" 0 * :\" + USERNAME + \"\\r\\n\");\n    };\n\n    // Attempt to reconnect\n    sock.onclose = function() {\n        console.log(\"sock closed normally\");\n        onDisconnect();\n    }\n    sock.onerror = function() {\n        console.log(\"sock closed by an error\");\n        onDisconnect();\n    }\n    function onDisconnect() {\n        connected = false;\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#reconnect\").removeClass(\"active\");\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#global-chat-messages\").append(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"chat-loading\").detach());\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-loading\").show();\n        if (failedAttempts == 0) {\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-loading > #connecting\").show();\n            failedAttempts++;\n            initSock();\n        }\n        else {\n            currentTimer = disconnectionTimers[Math.min(failedAttempts - 1, 3)];\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-loading > #connecting\").hide();\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-loading > #failed\").show();\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-loading > #failed > #timer\").text(currentTimer);\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#reconnect\").show();\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#chat-input').hide();\n            failedAttempts++;\n            clearInterval(timerInterval);\n            timerInterval = setInterval(updateTimer, 1000);\n        }\n    };\n    function updateTimer() {\n        currentTimer--;\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-loading > #failed > #timer\").text(currentTimer);\n        if (currentTimer <= 0) {\n            initSock();\n        }\n    }\n\n    sock.onmessage = function(e) {\n        var commands = parseCommands(e.data);\n        for (var i = 0; i < commands.length; i++) {\n            var cmd = commands[i];\n            switch (cmd.command) {\n                case \"PING\":\n                    sock.send(\"PONG :0.0.0.0\\r\\n\");\n                    break;\n                case \"433\":\n                    // Nick already used, try with fallback\n                    var nickNum = parseInt(NICK.match(/\\^(\\d+)/)[1]) + 1;\n                    NICK = NICK.replace(/\\^(\\d+)/, \"^\" + nickNum);\n                    sock.send(\"NICK \" + NICK + \"\\r\\n\");\n                    break;\n                case \"001\":\n                    // RPL_WELCOME\n                    console.log(\"Authenticated\");\n                    sock.send(\"USERHOST \" + NICK + \"\\r\\n\");\n                    sock.send(\"JOIN #\" + CHANNEL + \"\\r\\n\");\n                    break;\n                case \"302\":\n                    // RPL_USERHOST\n                    HOSTNAME = cmd.params[1].replace(NICK, '').match(/^\\*?=(?:\\+|-)(.*)$/)[1];\n                    break;\n                case \"JOIN\":\n                    failedAttempts = 0;\n                    var nick = cmd.origin.split(\"!\")[0];\n                    if (nick == NICK) {\n                        console.log(\"Joined \" + cmd.params[0]);\n                        console.log(\"Loading history...\");\n                        __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.get(\"https://irc.eternagame.org/history\", function(data) {\n                            console.log(\"History recieved\");\n                            var messages = data.trim().split(\"\\n\");\n                            var firstNewMessage = 0;\n                            var j;\n                            for (j = 0; j < messages.length; j++)\n                                if (postedMessages.indexOf(messages[j].trim()) == -1) break;\n                            if (!firstConnection)\n                                postMessage(\"Reconnected to chat - Some messages might be missing if you were away for a long time\", true);\n                            for (; j < messages.length; j++) {\n                                postMessage(messages[j], true);\n                            }\n                            while (toBePosted.length) {\n                                postMessage(toBePosted.shift(), true);\n                            }\n                            firstConnection = false;\n                            connected = true;\n                            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#reconnect\").hide();\n                            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-loading\").hide();\n                            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-input\").show();\n                            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"div#chat-loading\").detach();\n                            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tabs\").show();\n                            setTimeout(function(){\n                                __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tabs\").children().mCustomScrollbar(\"scrollTo\", \"bottom\", {callbacks: false});\n                            }, 100);\n                            if (USERNAME !== \"Anonymous\") {\n                                __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-input\").prop(\"disabled\", false);\n                            } else  {\n                                __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-input\").attr(\"placeholder\", \"Please log in to chat\")\n                            }\n                        });\n                    } else {\n                        addUser(cmd.origin.split(\"!\")[0]);\n                    }\n                    break;\n                case \"331\":\n                case \"332\":\n                    // Topic, display?\n                    break;\n                // Part and quit both need to be handled the same way in our case - a user left the room\n                case \"PART\":\n                case \"QUIT\":\n                    removeUser(cmd.origin.split(\"!\")[0]);\n                    break;\n                case \"353\":\n                    var users = cmd.params[3].trim().split(\" \");\n                    for (var j = 0; j < users.length; j++) {\n                        addUser(users[j]);\n                    }\n                    break;\n                case \"366\":\n                    // Signifies end of names, don't think this is needed?\n                    break;\n                case \"NOTICE\":\n                case \"PRIVMSG\":\n                    postMessage(cmd.params[1], false);\n                    break;\n                case \"MODE\":\n                    // Check if user has been banned, if so disable input and notify in chat\n                    // TODO: Handle extended bans\n                    // TODO: Handle multiple modes being set/unset at once\n                    if (cmd.params[1] == \"+b\") {\n                        if ((NICK + '!' + HOSTNAME).match(new RegExp(cmd.params[2].replace(/\\*/g, \".+\").replace(\"^\", \"\\\\^\")))) {\n                            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-input\").prop('disabled', true);\n                            postMessage(\"You have been banned from chat\");\n                        }\n                    } else if (cmd.params[1] == \"-b\") {\n                        if ((NICK + '!' + HOSTNAME).match(new RegExp(cmd.params[2].replace(/\\*/g, \".+\").replace(\"^\", \"\\\\^\")))) {\n                            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-input\").prop('disabled', false);\n                            postMessage(\"You are now allowed to post in chat\");\n                        }\n                    }\n                    break;\n                // Check if user has been kicked, if so disable input and notify in chat, if other user remove them from online list\n                case \"KICK\":\n                    if (cmd.params[1] == NICK) {\n                        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-input\").prop('disabled', true);\n                        postMessage(\"You have been kicked from chat\" + (cmd.params[2] ? \" - \" + cmd.params[2] : ''));\n                    } else {\n                        removeUser(cmd.params[1]);\n                    }\n                    break;\n                case \"404\":\n                    // Can't post message\n                    if (cmd.params[2].startsWith(\"You are banned\")) {\n                        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-input\").prop('disabled', true);\n                        postMessage(\"You are not allowed to post in chat\");\n                    }\n                    break;\n                case \"474\":\n                    // Can't join channel\n                    if (cmd.params[1] == \"Cannot join channel (+b)\") {\n                        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-input\").prop('disabled', true);\n                        postMessage(\"You have been banned from chat\");\n                    }\n                    break;\n                // Ignore information stuff\n                case \"002\":\n                case \"003\":\n                case \"004\":\n                case \"005\":\n                case \"251\":\n                case \"252\":\n                case \"253\":\n                case \"254\":\n                case \"255\":\n                case \"265\":\n                case \"266\":\n                case \"333\":\n                // Topic set by _ at _\n                case \"422\":\n                    break;\n\n                default:\n                    console.log(\"[Chat] Unhandled command recieved. Command: \" + cmd.command + \" Origin: \" + cmd.origin + \" Params: \" + cmd.params);\n            }\n        }\n\n    };\n}\n\nwindow.addEventListener(\"message\", screenshotHook, false);\nwindow.addEventListener(\"message\", scrollHook, false);\n\nfunction screenshotHook(event) {\n    if (event.origin.match(/https?:\\/\\/((127.0.0.1)|(localhost)|((.*\\.)?eternagame\\.org)|((.*\\.?)eternadev\\.org))/).length !== 0)\n        if (event.data.type === 'chat-message')\n            sendMessage(event.data.content);\n}\n\nfunction scrollHook(event){\n    if (event.origin.match(/https?:\\/\\/((127.0.0.1)|(localhost)|((.*\\.)?eternagame\\.org)|((.*\\.?)eternadev\\.org))/).length !== 0) {\n        if (event.data.type === 'chat-scroll') {\n           setTimeout(function(){\n               __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tab-global\").mCustomScrollbar(\"scrollTo\", \"bottom\", {callbacks: false});\n           }, 100);\n           chatAutoScroll = \"bottom\";\n        }\n    }\n}\n\nfunction toggleVisibility(){\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#minimization-triangle').toggleClass('flipped');\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('#chat-content').fadeToggle('fast');\n    __WEBPACK_IMPORTED_MODULE_0_jquery___default()('.tab').fadeToggle('fast');\n    if(__WEBPACK_IMPORTED_MODULE_0_jquery___default()('#chat-content').css('display') !== 'none')\n        __WEBPACK_IMPORTED_MODULE_0_jquery___default()(\"#chat-tab-global\").mCustomScrollbar(\"scrollTo\", 'bottom');\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvY2hhdC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9jaGF0LmpzPzgxOTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8galF1ZXJ5IGFuZCBqUXVlcnktdWlcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgJ2pxdWVyeS11aS91aS93aWRnZXRzL3RhYnMnO1xuaW1wb3J0ICdqcXVlcnktdWkvdWkvd2lkZ2V0cy9kaWFsb2cnO1xuaW1wb3J0ICdqcXVlcnktdWkvdWkvd2lkZ2V0cy9idXR0b24nO1xuaW1wb3J0ICdqcXVlcnktdWkvdWkvcG9zaXRpb24nO1xuaW1wb3J0ICdqcXVlcnktdWkvdGhlbWVzL2Jhc2UvY29yZS5jc3MnO1xuaW1wb3J0ICdqcXVlcnktdWkvdGhlbWVzL2Jhc2UvdGFicy5jc3MnO1xuaW1wb3J0ICdqcXVlcnktdWkvdGhlbWVzL2Jhc2UvbWVudS5jc3MnO1xuaW1wb3J0ICdqcXVlcnktdWkvdGhlbWVzL2Jhc2UvZGlhbG9nLmNzcyc7XG5pbXBvcnQgJ2pxdWVyeS11aS90aGVtZXMvYmFzZS9idXR0b24uY3NzJztcblxuLy8gbUN1c3RvbVNjcm9sbGJhclxuaW1wb3J0IHNjcm9sbGJhciBmcm9tICdtYWxpaHUtY3VzdG9tLXNjcm9sbGJhci1wbHVnaW4nO1xuc2Nyb2xsYmFyKCQpO1xuXG4vLyBDb250ZXh0IE1lbnVcbmltcG9ydCAndWktY29udGV4dG1lbnUnO1xuXG53aW5kb3cuJCA9IHdpbmRvdy5qUXVlcnkgPSAkO1xuXG4vLyBNYXJrZG93bi1pdFxuaW1wb3J0IE1hcmtkb3duSXQgZnJvbSBcIm1hcmtkb3duLWl0XCI7XG52YXIgbWQgPSBuZXcgTWFya2Rvd25JdCh7XG4gICAgbGlua2lmeTogdHJ1ZSxcbiAgICB0eXBvZ3JhcGhlcjogdHJ1ZVxufSkuZGlzYWJsZSgnaW1hZ2UnKTtcbi8vIFZpYSBodHRwczovL2dpdGh1Yi5jb20vbWFya2Rvd24taXQvbWFya2Rvd24taXQvYmxvYi9lNmYxOWVhYjQyMDQxMjJlODVlNGEzNDJlMGMxYzg0ODZmZjQwYzJkL2RvY3MvYXJjaGl0ZWN0dXJlLm1kXG52YXIgZGVmYXVsdFJlbmRlciA9IG1kLnJlbmRlcmVyLnJ1bGVzLmxpbmtfb3BlbiB8fCBmdW5jdGlvbih0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52LCBzZWxmKSB7XG4gIHJldHVybiBzZWxmLnJlbmRlclRva2VuKHRva2VucywgaWR4LCBvcHRpb25zKTtcbn07XG5tZC5yZW5kZXJlci5ydWxlcy5saW5rX29wZW4gPSBmdW5jdGlvbih0b2tlbnMsIGlkeCwgb3B0aW9ucywgZW52LCBzZWxmKSB7XG4gIC8vIElmIHlvdSBhcmUgc3VyZSBvdGhlciBwbHVnaW5zIGNhbid0IGFkZCBgdGFyZ2V0YCAtIGRyb3AgY2hlY2sgYmVsb3dcbiAgdmFyIGFJbmRleCA9IHRva2Vuc1tpZHhdLmF0dHJJbmRleCgndGFyZ2V0Jyk7XG5cbiAgaWYgKGFJbmRleCA8IDApIHtcbiAgICB0b2tlbnNbaWR4XS5hdHRyUHVzaChbJ3RhcmdldCcsICdfYmxhbmsnXSk7IC8vIGFkZCBuZXcgYXR0cmlidXRlXG4gIH0gZWxzZSB7XG4gICAgdG9rZW5zW2lkeF0uYXR0cnNbYUluZGV4XVsxXSA9ICdfYmxhbmsnOyAgICAvLyByZXBsYWNlIHZhbHVlIG9mIGV4aXN0aW5nIGF0dHJcbiAgfVxuXG4gIC8vIHBhc3MgdG9rZW4gdG8gZGVmYXVsdCByZW5kZXJlci5cbiAgcmV0dXJuIGRlZmF1bHRSZW5kZXIodG9rZW5zLCBpZHgsIG9wdGlvbnMsIGVudiwgc2VsZik7XG59O1xuXG4vLyBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgbWFya2Rvd24taXQgd2l0aCBubyBydWxlcyBlbmFibGVkLCB1c2luZyBpdCBqdXN0IHRvIHN0cmlwL3Nhbml0aXplIEhUTUxcbnZhciBtZFNhbml0aXplciA9IG5ldyBNYXJrZG93bkl0KCd6ZXJvJyk7XG5cbi8vIFNvY2tKU1xuaW1wb3J0IFNvY2tKUyBmcm9tICdzb2NranMtY2xpZW50JztcblxuLy8gT3VyIGFzc2V0c1xuaW1wb3J0ICcuL3BvbHlmaWxscyc7XG5pbXBvcnQge0NIQVRfQ0hBTk5FTCwgQ1VSUkVOVF9VU0VSLCBXT1JLQlJBTkNIfSBmcm9tICcuL2RlZmluZS11c2VyJztcbmltcG9ydCAnLi4vY3NzL2NoYXQuY3NzJztcblxuLy8gVXNlcm5hbWUsIGlmIG5vdCBsb2dnZWQgaW4gXCJBbm5vbnltb3VzXCJcbnZhciBVU0VSTkFNRSA9IENVUlJFTlRfVVNFUiA/IENVUlJFTlRfVVNFUi5uYW1lIDogXCJBbm9ueW1vdXNcIjtcbi8vIFVzZXIgSUQsIGlmIG5vdCBsb2dnZWQgaW4gXCIwXCJcbnZhciBVSUQgPSBDVVJSRU5UX1VTRVIgPyBDVVJSRU5UX1VTRVIudWlkIDogMDtcbi8vIFJlcGxhY2UgaW52YWxpZCBJUkMgbmljayBjaGFyYWN0ZXJzIHdpdGggXCItXCIgKG9yIF8gaWYgZmlyc3QgY2hhciksIGxpbWl0IGl0cyBsZW5ndGggKG1heCBpcyAzMiwgbWludXggMiBmb3IgX18gYW5kIG1pbnVzIGEgbWF4IG9mIDMgZm9yIF4jIywgdGhlbiBzdWJ0cmFjdCB0aGUgVUlEIGxlbmd0aCksIGFuZCBhZGQgVUlEIGFuZCBpbml0aWFsIGNvbm5lY3Rpb24gbnVtYmVyXG52YXIgTklDSyA9IFVTRVJOQU1FLnJlcGxhY2UoL15bXmEtekEtWlxceDVCLVxceDYwXFx4N0ItXFx4N0RdLywgXCJfXCIpLnJlcGxhY2UoL1teYS16QS1aXFx4NUItXFx4NjBcXHg3Qi1cXHg3RFxcZC1dL2csIFwiLVwiKS5zdWJzdHIoMCwgMjctU3RyaW5nKFVJRCkubGVuZ3RoKSArIFwiX19cIiArIFVJRCArIFwiXjFcIjtcbi8vIElmIG5vIGNoYW5uZWwgaGFzIGJlZW4gc3BlY2lmaWVkIHZpYSBkZXZlbG9wbWVudC11c2VyLCBjb25uZWN0IHRvICNnbG9iYWxcbnZhciBDSEFOTkVMID0gQ0hBVF9DSEFOTkVMO1xuLy8gU2V0IHZpYSB0aGUgVVNFUkhPU1QgY2FsbCAocmVzcG9uc2UgMzAyL1JQTF9VU0VSSE9TVCkgc2VuZCBhZnRlciB0aGUgbnVtZXJpYyAwMDEvUlBMX1dFTENPTUUgaXMgcmVjZWl2ZWRcbnZhciBIT1NUTkFNRSA9IHVuZGVmaW5lZDtcblxuLy8gT25saW5lIHVzZXJzXG52YXIgb25saW5lVXNlcnMgPSBbXTtcblxudmFyIGZhaWxlZEF0dGVtcHRzID0gMTtcbnZhciBkaXNjb25uZWN0aW9uVGltZXJzID0gWzUsIDEwLCAxNSwgMzBdO1xudmFyIGN1cnJlbnRUaW1lciA9IDA7XG52YXIgdGltZXJJbnRlcnZhbDtcblxudmFyIHBvc3RlZE1lc3NhZ2VzID0gW107XG52YXIgdG9CZVBvc3RlZCA9IFtdO1xudmFyIGNvbm5lY3RlZCA9IGZhbHNlO1xudmFyIGZpcnN0Q29ubmVjdGlvbiA9IHRydWU7XG5cbi8vIEluaXRpYWxpemUgc2F2ZWQgcHJlZmVyZW5jZXNcbnRyeSB7XG4gICAgdmFyIHBlcnNpc3RhbnRTZXR0aW5ncyA9IGxvY2FsU3RvcmFnZTtcbn0gY2F0Y2goZSkge1xuICAgIGNvbnNvbGUud2FybihcIkxvY2FsIHN0b3JhZ2Ugbm90IGF2YWlsYWJsZSAoZWl0aGVyIHVuc3VwcG9ydGVkIG9yIHBlcm1pc3Npb24gZGVuaWVkKSAtIHVzZXIgcHJlZmVyZW5jZXMgd2lsbCBub3QgYmUgc2F2ZWRcIik7XG4gICAgdmFyIHBlcnNpc3RhbnRTZXR0aW5ncyA9IHt9XG59XG52YXIgaWdub3JlZFVzZXJzID0gcGVyc2lzdGFudFNldHRpbmdzLmNoYXRJZ25vcmVkID8gcGVyc2lzdGFudFNldHRpbmdzLmNoYXRJZ25vcmVkLnNwbGl0KFwiLFwiKSA6IFtdO1xuLy8gQ2hhdCBzaG91bGQgc3RhcnQgYXV0b21hdGljY2FsbHkgc2Nyb2xsaW5nIGFzIG5ldyBtZXNzYWdlcyBjb21lIGluXG52YXIgY2hhdEF1dG9TY3JvbGwgPSBcImJvdHRvbVwiO1xuXG52YXIgc29jaztcblxuLy9ERUJVRyBPTkxZXG5mdW5jdGlvbiBnZXRTb2NrKCkge1xuICAgIHJldHVybiBzb2NrO1xufVxuXG4vKipcbiAqICBQYXJzZSBtZXNzYWdlcyBzZW50IGJ5IHNlcnZlclxuICogIEBwYXJhbSBkYXRhOiBSYXcgZGF0YSBzZW50IGJ5IHNlcnZlclxuICogIEByZXR1cm46IEFycmF5IG9mIHBhcnNlZCBtZXNzYWdlc1xuICovXG5mdW5jdGlvbiBwYXJzZUNvbW1hbmRzKGRhdGEpIHtcbiAgICB2YXIgbXNncywgcG9ydGlvbnM7XG4gICAgLy8gU3BsaXQgaW50byBpbmRpdmlkdWFsIG1lc3NhZ2VzIChjb21tYW5kcylcbiAgICBtc2dzID0gZGF0YS5zcGxpdChcIlxcclxcblwiKTtcbiAgICAvLyBUaGUgcHJlc2VuY2Ugb2YgXFxyXFxuIGF0IHRoZSBlbmQgY2F1c2VzIGFuIGV4dHJhIGVsZW1lbnQsIHJlbW92ZSBpdFxuICAgIG1zZ3MucG9wKCk7XG4gICAgZm9yICh2YXIgaT0wOyBpPG1zZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gU3BsaXQgaW50byBwcmVmaXgsIGNvbW1hbmQsIHBhcmFtcywgYW5kIHRyYWlsZXIgKGRvZXMgbm90IHJlcHJlc2VudCBSRkMxNDU5LzI4MTIgc3BlY3MsIG9ubHkgd2hhdCdzIG5lZWRlZCB0byBwYXJzZSlcbiAgICAgICAgcG9ydGlvbnMgPSBtc2dzW2ldLm1hdGNoKC8oPzo6KFteIF0rKSApPyhbXiBdKykoKD86ICg/OlteIDpdKVteIF0qKSopPyg/OiA6KC4rKSk/Lyk7XG4gICAgICAgIG1zZ3NbaV0gPSB7fTtcbiAgICAgICAgbXNnc1tpXS5vcmlnaW4gPSBwb3J0aW9uc1sxXTtcbiAgICAgICAgbXNnc1tpXS5jb21tYW5kID0gcG9ydGlvbnNbMl07XG4gICAgICAgIC8vIEZpbGwgaW4gcGFyYW1zLCBpZiBhIHRyYWlsZXIgZXhpc3RzLCBhcHBlbmQgaXQgKGlmIHRoZXJlIGFyZSBubyBub3JtYWwgcGFyYW1zLCBzdXJlIHRoZXJlJ3MgYW4gYXJyYXkpXG4gICAgICAgIG1zZ3NbaV0ucGFyYW1zID0gW107XG4gICAgICAgIGlmIChwb3J0aW9uc1szXSkge1xuICAgICAgICAgICAgbXNnc1tpXS5wYXJhbXMgPSBtc2dzW2ldLnBhcmFtcy5jb25jYXQocG9ydGlvbnNbM10udHJpbSgpLnNwbGl0KFwiIFwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvcnRpb25zWzRdKSB7XG4gICAgICAgICAgICBtc2dzW2ldLnBhcmFtcy5wdXNoKHBvcnRpb25zWzRdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbXNncztcbn1cblxuLyoqXG4gKiAgUmV0dXJucyBvYmplY3Qgb2Ygb25saW5lVXNlcnMgd2hpY2ggaGFzIHRoZSBnaXZlbiB1c2VybmFtZVxuICogIEBwYXJhbSB1c2VybmFtZTogTmljayBvZiB1c2VyIHRvIHNlYXJjaCBmb3JcbiAqICBAcmV0dXJuOiBGb3VuZCBlbGVtZW50IG9mIG9ubGluZVVzZXJzXG4gKi9cbmZ1bmN0aW9uIG9ubGluZVVzZXJXaXRoTmFtZSggdXNlcm5hbWUgKSB7XG4gICAgdmFyIHJlcyA9ICQuZ3JlcChvbmxpbmVVc2VycywgZnVuY3Rpb24obyl7IHJldHVybiBvLm5hbWU9PXVzZXJuYW1lLnRvTG93ZXJDYXNlKCk7IH0pWzBdO1xuICAgIGlmKCFyZXMpIHJldHVybiBmYWxzZTtcbiAgICByZXMuaW5kZXggPSBvbmxpbmVVc2Vycy5pbmRleE9mKHJlcyk7XG4gICAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiAgV2hlbiBhIHVzZXIgam9pbnMsIG1ha2Ugc3VyZSB0aGV5J3JlIG9uIHRoZSBvbmxpbmUgbGlzdFxuICogIEBwYXJhbSB1c2VybmFtZTogTmljayBvZiBqb2luaW5nIHVzZXJcbiAqL1xuZnVuY3Rpb24gYWRkVXNlciggdXNlcm5hbWUgKSB7XG4gICAgdmFyIHBvcnRpb25zLCB1aWQsIHVzZXJsaTtcbiAgICB2YXIgdXNlcm5hbWVzVG9JZ25vcmUgPSBbXCJBbm9ueW1vdXNcIiwgXCJoaXN0b3J5XCIsIFwiQ2hhdEJvdFwiXTtcbiAgICB2YXIgaXJjSWRzID0ge1xuICAgICAgICBob2dsYWhvbzogMzY5MjEsXG4gICAgICAgIE5hbmRvOiA0OTUwNyxcbiAgICAgICAgbWFjaGluZWx2ZXM6IDI1NzcsXG4gICAgICAgIExpbmtCb3Q6IDEyNjkzOCxcbiAgICAgICAgTEZQNjogNDgyOTAsXG4gICAgICAgIGpuaWNvbDogNDgxNjYsXG4gICAgICAgIHN0YXJ5amVzczogMTE3NzUsXG4gICAgICAgIGJybzogMjQyNjMsXG4gICAgICAgIGJyb3VyZDogMjQyNjNcbiAgICB9O1xuXG4gICAgLy8gUGFyc2UgYXV0b21hdGljIHN1ZmZpeFxuICAgIHBvcnRpb25zID0gdXNlcm5hbWUubWF0Y2goLyg/Ol4oLispKD86X18oXFxkKylcXF5cXGQrKSl8KC4rKS8pO1xuICAgIC8vIElmIHVzZXJpZCBpcyBpbmNsdWRlZCwgZ2V0IGl0LCBpZiBpdCdzIGFuIElSQyByZWd1bGFyLCBnZXQgdGhlaXIgdXNlcklEIGZyb20gdGhlIGxpc3RcbiAgICB1aWQgPSBwb3J0aW9uc1syXXx8IGlyY0lkc1t1c2VybmFtZV0gfHwgMDtcbiAgICAvLyBHZXQgYWN0dWFsIHVzZXJuYW1lXG4gICAgdXNlcm5hbWUgPSBwb3J0aW9uc1sxXSB8fCBwb3J0aW9uc1szXTtcbiAgICAvLyBSZW1vdmUgQCBmcm9tIE9wJ3MgdXNlcm5hbWVcbiAgICBpZiAodXNlcm5hbWVbMF0gPT0gXCJAXCIpIHtcbiAgICAgICAgdXNlcm5hbWUgPSB1c2VybmFtZS5zbGljZSgxKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgdXNlciBpc24ndCBvbmxpbmUgYW5kIGlzbid0IHRvIGJlIGlnbm9yZWQsIGFkZCBpdCB0byB0aGUgcGFnZSBpbiB0aGUgcmlnaHQgcGxhY2UgYW5kIGtlZXAgdHJhY2sgb2YgaXRcbiAgICBpZiAodXNlcm5hbWVzVG9JZ25vcmUuaW5jbHVkZXModXNlcm5hbWUpKSByZXR1cm47XG5cbiAgICBpZiAoIW9ubGluZVVzZXJXaXRoTmFtZSh1c2VybmFtZSkpIHtcbiAgICAgICAgb25saW5lVXNlcnMucHVzaCh7IG5hbWU6IHVzZXJuYW1lLnRvTG93ZXJDYXNlKCksIGNvbm5lY3Rpb25zOiAxLCBpZDogdWlkIH0pO1xuICAgICAgICBvbmxpbmVVc2Vycy5zb3J0KGZ1bmN0aW9uKHVzZXJBLCB1c2VyQil7XG4gICAgICAgICAgICBpZiAodXNlckEubmFtZSA8IHVzZXJCLm5hbWUpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmICh1c2VyQS5uYW1lID4gdXNlckIubmFtZSkgcmV0dXJuIDE7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdXNlcmxpID0gJzxsaSBpZD1cImNoYXQtdXNlcmxpc3QtdXNlci17VVNFUk5BTUVfTE9XfVwiIGNsYXNzPVwiY2hhdC11c2VybGlzdC11c2VyXCI+PGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHA6Ly97V09SS0JSQU5DSH0vd2ViL3BsYXllci97VUlEfS9cIj57VVNFUk5BTUV9PC9hPntPUFRTfTwvbGk+JztcbiAgICAgICAgdXNlcmxpID0gdXNlcmxpLnJlcGxhY2UoJ3tVU0VSTkFNRV9MT1d9JywgdXNlcm5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tVU0VSTkFNRX0nLCB1c2VybmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ3tVSUR9JywgdWlkKVxuICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcIntPUFRTfVwiLCBVU0VSTkFNRSAhPT0gXCJBbm9ueW1vdXNcIiA/ICc8YSBjbGFzcz1cImNoYXQtbWVzc2FnZS1vcHRpb25zXCI+JnZlbGxpcDs8L2E+JyA6IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwie1dPUktCUkFOQ0h9XCIsIFdPUktCUkFOQ0gpO1xuXG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYSB1c2VyIGFoZWFkIG9mIHRoaXMgb25lIGluIHRoZSBhcnJheSwgaW5zZXJ0IGl0IGJlZm9yZSB0aGF0IG9uZSBpbiB0aGUgbGlzdCwgZWxzZSBhZGQgdG8gdGhlIGVuZFxuICAgICAgICBpZiAob25saW5lVXNlcnNbb25saW5lVXNlcldpdGhOYW1lKHVzZXJuYW1lKS5pbmRleCsxXSkge1xuICAgICAgICAgICAgJCggdXNlcmxpICkuaW5zZXJ0QmVmb3JlKCBcImxpI2NoYXQtdXNlcmxpc3QtdXNlci1cIiArIG9ubGluZVVzZXJzW29ubGluZVVzZXJXaXRoTmFtZSh1c2VybmFtZSkuaW5kZXgrMV1bXCJuYW1lXCJdICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiI2NoYXQtdXNlcnMtbGlzdFwiKS5hcHBlbmQodXNlcmxpKTtcbiAgICAgICAgfVxuICAgICAgICAkKFwiI2NoYXQtdXNlcnMtb25saW5lXCIpLmh0bWwocGFyc2VJbnQoJChcIiNjaGF0LXVzZXJzLW9ubGluZVwiKS5odG1sKCkpICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb25saW5lVXNlcnNbb25saW5lVXNlcldpdGhOYW1lKHVzZXJuYW1lKS5pbmRleF1bXCJjb25uZWN0aW9uc1wiXSsrO1xuICAgIH1cbn1cblxuLyoqXG4gKiAgV2hlbiBhIHVzZXIgbGVhdmVzLCByZW1vdmUgdGhlbSBmcm9tIHRoZSBsaXN0XG4gKiAgQHBhcmFtIHVzZXJuYW1lOiBOaWNrIG9mIHBhcnRpbmcvcXVpdHRpbmcgdXNlclxuICovXG5mdW5jdGlvbiByZW1vdmVVc2VyKCB1c2VybmFtZSApIHtcbiAgICB2YXIgdXNlcm5hbWVzVG9JZ25vcmUgPSBbXCJBbm9ueW1vdXNcIiwgXCJoaXN0b3J5XCIsIFwiQ2hhdEJvdFwiXTtcblxuICAgIHVzZXJuYW1lID0gdXNlcm5hbWUubWF0Y2goLyg/Ol4oLispKD86X18oXFxkKylcXF5cXGQrKSl8KC4rKS8pO1xuICAgIC8vIEdldCBhY3R1YWwgdXNlcm5hbWVcbiAgICB1c2VybmFtZSA9IHVzZXJuYW1lWzFdIHx8IHVzZXJuYW1lWzNdO1xuICAgIC8vIFJlbW92ZSBAIGZyb20gT3AncyB1c2VybmFtZVxuICAgIGlmICh1c2VybmFtZVswXSA9PSBcIkBcIikge1xuICAgICAgICB1c2VybmFtZSA9IHVzZXJuYW1lLnNsaWNlKDEpO1xuICAgIH1cblxuICAgIGlmICh1c2VybmFtZXNUb0lnbm9yZS5pbmNsdWRlcyh1c2VybmFtZSkpIHJldHVybjtcblxuICAgIGlmIChvbmxpbmVVc2Vyc1tvbmxpbmVVc2VyV2l0aE5hbWUodXNlcm5hbWUpLmluZGV4XVtcImNvbm5lY3Rpb25zXCJdID09IDEpIHtcbiAgICAgICAgb25saW5lVXNlcnMuc3BsaWNlKG9ubGluZVVzZXJXaXRoTmFtZSh1c2VybmFtZSkuaW5kZXgsIDEpO1xuICAgICAgICAkKFwibGkjY2hhdC11c2VybGlzdC11c2VyLVwiICsgdXNlcm5hbWUudG9Mb3dlckNhc2UoKSkucmVtb3ZlKCk7XG4gICAgICAgICQoXCIjY2hhdC11c2Vycy1vbmxpbmVcIikuaHRtbChwYXJzZUludCgkKFwiI2NoYXQtdXNlcnMtb25saW5lXCIpLmh0bWwoKSkgLSAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvbmxpbmVVc2Vyc1tvbmxpbmVVc2VyV2l0aE5hbWUodXNlcm5hbWUpLmluZGV4XVtcImNvbm5lY3Rpb25zXCJdLS07XG4gICAgfVxufVxuXG4vKipcbiAqICBIVE1MIGVzY2FwZSByZWd1bGFyIGV4cHJlc3Npb25cbiAqICBAcGFyYW0gc2VhcmNoOiBSZWdleCBzZWFyY2ggc3Rpcm5nXG4gKiAgQHBhcmFtIG1vZDogUmVnZXggbW9kaWZpZXIgc3RyaW5nXG4gKiAgQHJldHVybjogRW5jb2RlZCByZWdleFxuICovXG5mdW5jdGlvbiBlbmNvZGVkUmVnZXgoIHNlYXJjaCApIHtcbiAgICB2YXIgbW9kPSAnJztcbiAgICBpZiAoc2VhcmNoLmdsb2JhbCkge21vZCArPSBcImdcIjt9XG4gICAgaWYgKHNlYXJjaC5tdWx0aWxpbmUpIHttb2QgKz0gXCJtXCI7fVxuICAgIGlmIChzZWFyY2guaWdub3JlQ2FzZSkge21vZCArPSBcImlcIjt9XG5cbiAgICByZXR1cm4gbmV3IFJlZ0V4cChzZWFyY2guc291cmNlLnJlcGxhY2UoLyYvZywgXCImYW1wO1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvPC9nLCBcIiZsdDtcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLz4vZywgXCImZ3Q7XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCBcIiZxdW90O1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCBcIiYjeDI3O1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFwvL2csIFwiJiN4MkY7XCIpLFxuICAgICAgICAgICAgICAgICAgICAgIG1vZCk7XG59XG5cbi8qKlxuICogIEFkZCBjb2xvciB0byBhIHVzZXJuYW1lIGJhc2VkIG9uIHRoZSBVSUQgaW4gdGhlIG1lc3NhZ2Ugb3IgZm9udCB0YWdzXG4gKiAgQHBhcmFtIGRhdGE6IFVzZXJuYW1lIHRvIGJlIGNvbG9yZWRcbiAqICBAcGFyYW0gdWlkOiBVSUQgdG8gdXNlIGZvciBkZXRlcm1pbmluZyBkZWZhdWx0IGNvbG9yXG4gKiAgQHBhcmFtIGlzQWN0aW9uOiBib29sZWFuIGluZGljYXRpbmcgaWYgdGhlIG1lc3NhZ2UgaXMgYW4gYWN0aW9uLiBNYXkgbmVlZCB0byBiZSByZXdvcmtlZCBvbmNlIEZsYXNoIGNoYXQgaXMgZHJvcHBlZCB0byBiZXR0ZXIgY29pbmNpZGUgd2l0aCBJUkMgc3BlY3NcbiAqICBAcmV0dXJuOiBGb3JtYXR0ZWQgdXNlcm5hbWUgSFRNTFxuICovXG5mdW5jdGlvbiBjb2xvcml6ZVVzZXIgKCBkYXRhLCB1aWQsIGlzQWN0aW9uICkge1xuICAgIHZhciBjb2xvcnMgPSBbXCIjZjM5MTkxXCIsIFwiI2YzOTY5MVwiLCBcIiNmMzliOTFcIiwgXCIjZjM5ZjkxXCIsIFwiI2YzYTQ5MVwiLCBcIiNmM2E4OTFcIiwgXCIjZjNhZDkxXCIsIFwiI2YzYjE5MVwiLCBcIiNmM2I2OTFcIiwgXCIjZjNiYTkxXCIsIFwiI2YzYmY5MVwiLCBcIiNmM2M0OTFcIiwgXCIjZjNjODkxXCIsIFwiI2YzY2Q5MVwiLCBcIiNmM2QxOTFcIiwgXCIjZjNkNjkxXCIsIFwiI2YzZGE5MVwiLCBcIiNmM2RmOTFcIiwgXCIjZjNlNDkxXCIsIFwiI2YzZTg5MVwiLCBcIiNmM2VkOTFcIiwgXCIjZjNmMTkxXCIsIFwiI2YwZjM5MVwiLCBcIiNlYmYzOTFcIiwgXCIjZTdmMzkxXCIsIFwiI2UyZjM5MVwiLCBcIiNkZGYzOTFcIiwgXCIjZDlmMzkxXCIsIFwiI2Q0ZjM5MVwiLCBcIiNkMGYzOTFcIiwgXCIjY2JmMzkxXCIsIFwiI2M3ZjM5MVwiLCBcIiNjMmYzOTFcIiwgXCIjYmVmMzkxXCIsIFwiI2I5ZjM5MVwiLCBcIiNiNGYzOTFcIiwgXCIjYjBmMzkxXCIsIFwiI2FiZjM5MVwiLCBcIiNhN2YzOTFcIiwgXCIjYTJmMzkxXCIsIFwiIzllZjM5MVwiLCBcIiM5OWYzOTFcIiwgXCIjOTRmMzkxXCIsIFwiIzkxZjM5M1wiLCBcIiM5MWYzOThcIiwgXCIjOTFmMzljXCIsIFwiIzkxZjNhMVwiLCBcIiM5MWYzYTVcIiwgXCIjOTFmM2FhXCIsIFwiIzkxZjNhZVwiLCBcIiM5MWYzYjNcIiwgXCIjOTFmM2I3XCIsIFwiIzkxZjNiY1wiLCBcIiNmMzkxYmFcIiwgXCIjZjM5MWI2XCIsIFwiI2YzOTFiMVwiLCBcIiNmMzkxYWRcIiwgXCIjZjM5MWE4XCIsIFwiI2YzOTFhNFwiLCBcIiNmMzkxOWZcIiwgXCIjZjM5MTliXCIsIFwiI2YzOTE5NlwiXTtcbiAgICAvLyBGaW5kIGVzY2FwZWQgZm9udCB0YWdzLCBhbmQgcmVwbGFjZSB0aGVtIHdpdGggYSBzcGFuIGFuZCB0aGUgaGV4IGNvbG9yIHNpZ25pZmllZCwgaWYgaXQncyBhbiBhY3Rpb24gcmVtb3ZlIHRoZSB0YWdcbiAgICB2YXIgY3VzdG9tQ29sb3JlZCA9IGRhdGEucmVwbGFjZSgvJmx0O2ZvbnQgY29sb3I9KD86JiN4Mjc7fFxcJnF1b3Q7KT8oI1thLWZBLUZcXGRdezZ9KSg/OiYjeDI3O3xcXCZxdW90Oyk/Jmd0OyguKykmbHQ7XFwvZm9udCZndDsvaSwgaXNBY3Rpb24gPyAnJDInOic8c3BhbiBzdHlsZT1cImNvbG9yOiQxO1wiPiQyPC9zcGFuPicpXG4gICAgLy8gQ29uc3RydWN0IHNwYW4sIGlmIGl0J3MgYW4gYWN0aW9uIG9taXQgdGhlIGNvbG9yaW5nXG4gICAgcmV0dXJuICc8YSB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzcz1cImNoYXQtbWVzc2FnZS11c2VyLWxpbmtcIiBocmVmPVwiaHR0cDovLycgKyBXT1JLQlJBTkNIICsgJy93ZWIvcGxheWVyLycgKyB1aWQgKyAnL1wiPjxzcGFuIGNsYXNzPVwiY2hhdC1tZXNzYWdlLXVzZXJcIiAnICsgKGlzQWN0aW9uID8gJycgOiAnc3R5bGU9XCJjb2xvcjonICsgY29sb3JzW3VpZCAlIGNvbG9ycy5sZW5ndGhdICsgJztcIicpICsgJz4nICsgY3VzdG9tQ29sb3JlZCArICc8L3NwYW4+PC9hPicgKyAoIWlzQWN0aW9uID8gJzogJyA6ICcgJyk7XG59XG5cbi8qKlxuICogIEZvcm1hdCB0aGUgY3VycmVudCB0aW1lIHRvIGEgRmxhc2gtY2hhdCBjb21wYXRpYmxlIHRpbWVzdGFtcFxuICogIEBwYXJhbSB0aW1lOiBUaW1lc3RhbXAgYXQgYmVnaW5uaW5nIG9mIG1lc3NhZ2VcbiAqICBAcmV0dXJuOiBGb3JtYXR0ZWQgdGltZXN0YW1wXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdFRpbWUoIHN0cmluZyApIHtcbiAgICAvLyBDb25zdHJ1Y3QgZGF0ZSBmcm9tIHN0cmluZywgZ2V0IHRoZSB0aW1lXG4gICAgcmV0dXJuIG5ldyBEYXRlKERhdGUucGFyc2Uoc3RyaW5nKSkudG9UaW1lU3RyaW5nKCkucmVwbGFjZSgvKFxcZHsyfSk6KFxcZHsyfSkuKy8sIGZ1bmN0aW9uKG1hdGNoLCBob3VyLCBtaW51dGVzKSB7XG4gICAgICAgIC8vIEZvcm1hdCB0byBub24tbWlsbGl0YXJ5LCBhZGQgYnJhY2tldHNcbiAgICAgICAgcmV0dXJuIFwiW1wiICsgKGhvdXIlMTJ8fDEyKSArIFwiOlwiICsgbWludXRlcyArIFwiIFwiICsgKGhvdXIgPiAxMSA/IFwiUE1cIiA6IFwiQU1cIikgKyBcIl1cIjtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiAgRGlzcGxheSBhIG1lc3NhZ2UgaW4gdGhlIGNoYXQgd2luZG93XG4gKiAgQHBhcmFtIHJhd19tc2c6IFRoZSBjb250ZW50cyBvZiB0aGUgcHJpdm1zZyB0byBiZSBwb3N0ZWRcbiAqICBAcGFyYW0gaXNIaXN0b3J5OiBJZiB0cnVlLCBpdCBzaG91bGQgYmUgcHVzaGVkIGF0IHRoZSB0b3AsIGFzIGl0IGlzIGFuIG9sZGVyIG1lc3NhZ2UgKGFuZCBtYXkgYmUgY29taW5nIGluIGxhdGUpXG4gKlxuICovXG5mdW5jdGlvbiBwb3N0TWVzc2FnZSggcmF3X21zZywgaXNIaXN0b3J5ICkge1xuICAgIGlmICghaXNIaXN0b3J5ICYmICFjb25uZWN0ZWQpIHtcbiAgICAgICAgdG9CZVBvc3RlZC5wdXNoKHJhd19tc2cpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHBvc3RlZE1lc3NhZ2VzLnB1c2gocmF3X21zZy50cmltKCkpO1xuXG4gICAgdmFyIHBhcnRzLCBwcmVmaXgsIHVpZCwgbmFtZSwgdGltZSwgaXNBY3Rpb24sIG1lc3NhZ2UsIGNsYXNzZXMgPSAnJztcbiAgICAvLyBJbiBhIHJlYWRhYmxlIGZvcm1hdCwgdGhlIHJlZ2V4IGxvb2tzIGxpa2U6ICgoVUlEKV8oRGlzcGxheSBOYW1lKV8oRGF0ZS9UaW1lKV8pPyhNZXNzYWdlKVxuICAgIC8vIFRpbWUgZm9ybWF0OiBTaG9ydERheSBTaG9ydE1vbnRoIERhdGUgSEg6TU06U1MgWWVhciBVVENcbiAgICBwYXJ0cyA9IHJhd19tc2cubWF0Y2goLygoXFxkKylfKC4rKV8oKD86TW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSAoPzpKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgWzAtM10/XFxkIFswLTJdXFxkKD86OlswLTZdXFxkKXsyfSBcXGR7NH0gVVRDKV8pPyguKykvKTtcbiAgICBwcmVmaXggPSBwYXJ0c1sxXTtcbiAgICB1aWQgPSBwYXJ0c1syXTtcbiAgICBuYW1lID0gcGFydHNbM107XG4gICAgdGltZSA9IHBhcnRzWzRdO1xuICAgIHJhd19tc2cgPSBwYXJ0c1s1XTtcbiAgICAvLyBUT0RPOiBJbiB0aGUgZnV0dXJlLCByZW1vdmUgdGhpcywgaXQncyBkdWUgdG8gRmxhc2ggY2hhdCdzIHByZS1lc2NhcGluZyBiZWZvcmUgc2VuZGluZy5cbiAgICByYXdfbXNnID0gcmF3X21zZy5yZXBsYWNlKC8mbHQ7L2csIFwiPFwiKS5yZXBsYWNlKC8mZ3Q7L2csIFwiPlwiKTtcbiAgICAvLyBUT0RPOiBFdmVudHVhbGx5IHJlbW92ZSwgb25seSBuZWVkZWQgZm9yIEZsYXNoIGNoYXQgY29tcGF0aWJsZSAvbWUgKG9uY2UgdGhlIEZsYXNoIGFwcCBpcyByZW1vdmVkIEFDVElPTiBzaG91bGQgYmUgdXNlZClcbiAgICByYXdfbXNnID0gcmF3X21zZy5yZXBsYWNlKC88ST4oLispPFxcL0k+L2csICckMScpO1xuICAgIC8vIFRPRE86IEJlY2F1c2Ugb2YgaG93IGNoYXQgd29ya3MgcmlnaHQgbm93LCB3ZSBjYW4gb25seSBoYW5kbGUgdGhlIGlubGluZSBzdHlsZXMsXG4gICAgLy8gYnV0IHNvbWUgb2YgdGhlIGJsb2NrLWxldmVsIHBpZWNlcyBjb3VsZCBiZSBuaWNlIHRvbyBvbmNlIHdlIGhhdmUgbXVsdGlsaW5lIG1lc3NhZ2VzIChsaXN0cywgYmxvY2txdW90ZXMsIGFuZCBmZW5jZXMgbW9zdGx5KS5cbiAgICAvLyBBbHNvLCB0aGUgYGNvZGVgIHNob3VsZCBiZSBzdHlsZWQgKGllIGhhdmUgYSBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBtYXliZSBhIGRpZmZlcmVudCB0ZXh0IGNvbG9yKSwgYW5kIGl0IGN1cnJlbnRseSBpc24ndC5cbiAgICAvLyBJbWFnZXMgYXJlIGFsc28gZGlzYWJsZWQsIGFzIHdlIGN1cnJlbnRseSBkb24ndCBoYXZlIGEgd2F5IHRvIGZvcm1hdCB0aGVtIHByb3Blcmx5LlxuICAgIHJhd19tc2cgPSBtZC5yZW5kZXJJbmxpbmUocmF3X21zZyk7XG5cblxuICAgIC8vIERvbid0IHNob3cgbWVzc2FnZXMgZnJvbSB1c2VyIG9uIGlnbm9yZSBsaXN0XG4gICAgaWYgKCBpZ25vcmVkVXNlcnMuaW5jbHVkZXMobmFtZSkgKXtyZXR1cm47fVxuXG4gICAgLy8gRm9yIC9tZVxuICAgIC8vIE5PVEU6IE1heSBuZWVkIHRvIGJlIHJld29ya2VkIG9uY2UgRmxhc2ggY2hhdCBpcyBkcm9wcGVkIHRvIGJldHRlciBjb2luY2lkZSB3aXRoIElSQyBzcGVjc1xuICAgIGlzQWN0aW9uID0gcmF3X21zZy5zdGFydHNXaXRoKFwiQUNUSU9OIFwiKSB8fCBuYW1lID8gbmFtZS5tYXRjaCgvPEk+PEZPTlQgQ09MT1I9XCIjQzBEQ0U3XCI+KC4qKTxcXC9GT05UPjxcXC9JPi8pIDogZmFsc2U7XG4gICAgcmF3X21zZyA9IHJhd19tc2cucmVwbGFjZSgvQUNUSU9OIC8sICcnKTtcblxuICAgIC8vIERldGVybWluZSBwb3NzaWJsZSBtZXNzYWdlIGNsYXNzZXNcbiAgICBpZiAoaXNBY3Rpb24pIHsgY2xhc3NlcyArPSBcIiBjaGF0LW1lc3NhZ2UtYWN0aW9uXCI7IH1cbiAgICBpZiAoIXByZWZpeCkgeyBjbGFzc2VzICs9IFwiIGNoYXQtbWVzc2FnZS1zeXN0ZW1cIjsgfVxuXG4gICAgLy8gRmlsbCB0ZW1wbGF0ZSBhbmQgcG9zdFxuICAgIG1lc3NhZ2UgPSAnPGxpIGNsYXNzPVwiY2hhdC1tZXNzYWdle01TR19DTEFTU31cIj48ZGl2IGNsYXNzPVwiY2hhdC1tZXNzYWdlLWNvbnRlbnRcIj57VVNFUn0mbHJtOzxzcGFuIGNsYXNzPVwiY2hhdC1tZXNzYWdlLW1lc3NhZ2VcIj57TUVTU0FHRX08L3NwYW4+PHNwYW4gY2xhc3M9XCJjaGF0LW1lc3NhZ2UtdGltZVwiPiAmbHJtO3tUSU1FfTwvc3Bhbj48L2Rpdj57T1BUU308L2xpPic7XG4gICAgbWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZShcIntNU0dfQ0xBU1N9XCIsIGNsYXNzZXMpXG4gICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBFdmVudHVhbGx5IHJlbW92ZSB0aGUgaXRhbGljaXNlIHJlcGxhY2VtZW50LCBvbmx5IG5lZWRlZCBmb3IgRmxhc2ggY2hhdCBjb21wYXRpYmxlIC9tZSAob25jZSB0aGUgRmxhc2ggYXBwIGlzIHJlbW92ZWQgQUNUSU9OIHNob3VsZCBiZSB1c2VkKVxuICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJ7VVNFUn1cIiwgcHJlZml4ID8gY29sb3JpemVVc2VyKG1kU2FuaXRpemVyLnJlbmRlcklubGluZShuYW1lLnJlcGxhY2UoLzxJPiguKyk8XFwvST4vZywgJyQxJykpLCB1aWQsIGlzQWN0aW9uKSA6ICcnKVxuICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJ7TUVTU0FHRX1cIiwgcmF3X21zZylcbiAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwie09QVFN9XCIsIFVTRVJOQU1FICE9PSBcIkFub255bW91c1wiID8gJzxhIGNsYXNzPVwiY2hhdC1tZXNzYWdlLW9wdGlvbnNcIj4mdmVsbGlwOzwvYT4nIDogXCJcIilcbiAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwie1RJTUV9XCIsIHByZWZpeCA/IGZvcm1hdFRpbWUodGltZSkgOiAnJyk7XG4gICAgJChcIiNnbG9iYWwtY2hhdC1tZXNzYWdlc1wiKS5hcHBlbmQobWVzc2FnZSk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAkKFwiI2NoYXQtdGFiLWdsb2JhbFwiKS5tQ3VzdG9tU2Nyb2xsYmFyKFwic2Nyb2xsVG9cIiwgY2hhdEF1dG9TY3JvbGwsIHtjYWxsYmFja3M6IGZhbHNlfSk7XG4gICAgfSwgMTAwKTtcbn1cblxuLyoqXG4gKiBBZGRzIHRoZSB1c2VyIHRvIHRoZSBjdXJyZW50IHVzZXIncyBpZ25vcmUgbGlzdFxuICogQHBhcmFtIHVzZXI6IFVzZXJuYW1lIHRvIGFkZCB0byB0aGUgaWdub3JlIGxpc3RcbiAqL1xuZnVuY3Rpb24gaWdub3JlVXNlcih1c2VyKSB7XG4gICAgaWYgKCFpZ25vcmVkVXNlcnMuaW5jbHVkZXModXNlcikpIHtcbiAgICAgICAgaWdub3JlZFVzZXJzLnB1c2godXNlcik7XG4gICAgICAgIHBlcnNpc3RhbnRTZXR0aW5ncy5jaGF0SWdub3JlZCA9IGlnbm9yZWRVc2VycztcbiAgICAgICAgcG9zdE1lc3NhZ2UoXCJJZ25vcmVkIFwiICsgdXNlciArIFwiLiBUbyB1bmlnbm9yZSB0aGlzIHVzZXIsIGVpdGhlciB1c2UgdGhlIG9wdGlvbnMgbWVudSBhZ2FpbiAob24gYSBtZXNzYWdlIG9yIHRoZSB1c2VyIGxpc3QpIG9yIHR5cGUgL3VuaWdub3JlIFwiICsgdXNlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcG9zdE1lc3NhZ2UodXNlciArIFwiIGhhcyBhbHJlYWR5IGJlZW4gaWdub3JlZFwiKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIHRoZSB1c2VyIHRvIHRoZSBjdXJyZW50IHVzZXIncyBpZ25vcmUgbGlzdFxuICogQHBhcmFtIHVzZXI6IFVzZXJuYW1lIHRvIHJlbW92ZSBmcm9tIHRoZSBpZ25vcmUgbGlzdCwgb3IgYCpgIHRvIGNsZWFyIHRoZSBsaXN0IGVudGlyZWx5XG4gKi9cbmZ1bmN0aW9uIHVuaWdub3JlVXNlcih1c2VyKSB7XG4gICAgaWYgKHVzZXIgPT0gXCIqXCIpIHtcbiAgICAgICAgaWdub3JlZFVzZXJzID0gW107XG4gICAgICAgIHBvc3RNZXNzYWdlKFwiVW5pZ25vcmVkIGFsbFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZ25vcmVkVXNlcnMuc3BsaWNlKGlnbm9yZWRVc2Vycy5pbmRleE9mKHVzZXIpLCAxKTtcbiAgICAgICAgcG9zdE1lc3NhZ2UoXCJVbmlnbm9yZWQgXCIgKyB1c2VyKTtcbiAgICB9XG4gICAgcGVyc2lzdGFudFNldHRpbmdzLmNoYXRJZ25vcmVkID0gaWdub3JlZFVzZXJzO1xufVxuXG4vKipcbiAqIENsb3NlIHJlcG9ydCBkaWFsb2cgYW5kIHJlc2V0IGl0cyBjb250ZW50c1xuICovXG5mdW5jdGlvbiBjbG9zZVJlcG9ydERpYWxvZygpIHtcbiAgICAkKFwiI3JlcG9ydC1kaWFsb2dcIikuZGlhbG9nKFwiY2xvc2VcIik7XG4gICAgJChcIiNyZXBvcnQtbWVzc2FnZVwiKS52YWwoXCJcIik7XG4gICAgJChcIiNyZXBvcnQtbWVzc2FnZVwiKS5wYXJlbnQoKS5oaWRlKCk7XG4gICAgJChcIiNyZXBvcnQtcmVwb3J0LCAjcmVwb3J0LWlnbm9yZVwiKS5wcm9wKFwiY2hlY2tlZFwiLCBmYWxzZSk7XG4gICAgJChcIiNyZXBvcnQtdXNlcm5hbWVcIikudmFsKFwiXCIpO1xuICAgICQoXCIjcmVwb3J0LXVpZFwiKS52YWwoXCJcIik7XG4gICAgJChcIiNyZXBvcnQtdGltZVwiKS52YWwoXCJcIik7XG4gICAgJChcIiNyZXBvcnQtb2ZmZW5kaW5nLW1lc3NhZ2VcIikudmFsKFwiXCIpO1xufVxuXG4vKipcbiAqIEdldCB1c2VybmFtZSBmcm9tIHRoZSBlbGVtZW50IGEgcGFzc2VkIG1lc3NhZ2Ugb3B0aW9ucyBlbGVtZW50IGlzIGF0dGFjaGVkIHRvLFxuICogYmUgaXQgYSBtZXNzYWdlIG9yIGEgdXNlciBsaXN0IGl0ZW1cbiAqIEBwYXJhbSB0YXJnZXQ6IE1lc3NhZ2Ugb3B0aW9ucyBET00gZWxlbWVudFxuICovXG5mdW5jdGlvbiB1c2VybmFtZUZyb21PcHRpb25zKHRhcmdldCkge1xuICAgIHZhciBjb250YWluZXIgPSAkKHRhcmdldCkucGFyZW50KCk7XG4gICAgaWYgKGNvbnRhaW5lci5oYXNDbGFzcygnY2hhdC1tZXNzYWdlJykpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5jaGlsZHJlbihcIi5jaGF0LW1lc3NhZ2UtY29udGVudFwiKS5jaGlsZHJlbihcIi5jaGF0LW1lc3NhZ2UtdXNlci1saW5rXCIpLnRleHQoKTtcbiAgICB9IGVsc2UgaWYgKGNvbnRhaW5lci5oYXNDbGFzcygnY2hhdC11c2VybGlzdC11c2VyJykpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5jaGlsZHJlbigpLmVxKDApLnRleHQoKTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBvcHRpb25zIHRhcmdldCcpO1xufVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoJ3Zpc2libGUnID09PSBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUpXG4gICAgICAgICAgICAkKFwiI2NoYXQtdGFiLWdsb2JhbFwiKS5tQ3VzdG9tU2Nyb2xsYmFyKFwic2Nyb2xsVG9cIiwgY2hhdEF1dG9TY3JvbGwsIHtjYWxsYmFja3M6IGZhbHNlfSk7XG4gICAgfSk7XG5cbiAgICAkKCcjbWluaW1pemF0aW9uLXRyaWFuZ2xlJykuY2xpY2sodG9nZ2xlVmlzaWJpbGl0eSk7XG5cbiAgICAkKFwiI2Rpc2Nvbm5lY3RcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIHNvY2suY2xvc2UoKTtcbiAgICB9KTtcblxuICAgIGluaXRTb2NrKCk7XG4gICAgLy8gSW5pdGlhbGl6ZSBVSVxuICAgIC8vIEluaXRpYWxpemUgdGFic1xuICAgICQoIFwiI2NoYXRcIiApLnRhYnMoe1xuICAgICAgICBhY3RpdmF0ZTogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcbiAgICAgICAgICAgIGlmICh1aSkge1xuICAgICAgICAgICAgICAgIGlmICh1aS5uZXdQYW5lbFswXS5pZCA9PSBcImNoYXQtdGFiLWdsb2JhbFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjY2hhdC10YWItZ2xvYmFsXCIpLm1DdXN0b21TY3JvbGxiYXIoXCJzY3JvbGxUb1wiLCBjaGF0QXV0b1Njcm9sbCwge2NhbGxiYWNrczogZmFsc2V9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBJbml0aWFsaXplIHNjcm9sbGJhclxuICAgICQoIFwiI2NoYXQtdGFic1wiICkuY2hpbGRyZW4oKS5tQ3VzdG9tU2Nyb2xsYmFyKHtcbiAgICAgICAgLy8gTm8gZmFuY3kgYW5pbWF0aW9uLCBpdCBtYWtlcyBpdCBmZWVsIGF3a3dhcmRcbiAgICAgICAgc2Nyb2xsSW5lcnRpYTogMCxcbiAgICAgICAgbW91c2VXaGVlbFBpeGVsczogMTAwLFxuICAgICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgICAgIC8vIFRoZSB1c2VyIGhhcyBzY3JvbGxlZCwgc28gZG9uJ3QgYXV0b21hdGljYWxseSBtb3ZlIHRvIHRoZSBib3R0b20gb24gYSBuZXcgbWVzc2FnZVxuICAgICAgICAgICAgb25TY3JvbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICgkKFwiI2NoYXQtdGFiLWdsb2JhbFwiKS5jc3MoJ2Rpc3BsYXknKSAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXRBdXRvU2Nyb2xsID0gdGhpcy5tY3MudG9wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBXZSd2ZSBoaXQgdGhlIGJvdHRvbSwgcmVzdW1lIHNjcm9sbGluZ1xuICAgICAgICAgICAgb25Ub3RhbFNjcm9sbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQoXCIjY2hhdC10YWItZ2xvYmFsXCIpLmNzcygnZGlzcGxheScpICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhdEF1dG9TY3JvbGwgPSBcImJvdHRvbVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIEZpbGwgb3V0IG1heCBsZW5ndGggb2YgbWVzc2FnZVxuICAgIC8vIEJyZWFrZG93biAtIElSQyBzZXJ2ZXIgbWF4OiAzMjQsIHRpbWVzdGFtcDogMjgsIHVuZGVyc2NvcmVzOiAzLCBtYXggbGVuZ3RoIG9mIHVzZXJuYW1lIGZvcm1hdHRpbmcgKGZvciAvbWUsIGRpc2NvdW50aW5nIHRoZSAzIGNoYXJhY3RlcnMgZm9yIHRoZSBjb21tYW5kKTogNDAsIHVzZXJuYW1lOiBkeW5hbWljLCBVSUQ6IGR5bmFtaWNcbiAgICAkKFwiI2NoYXQtaW5wdXRcIikucHJvcChcIm1heExlbmd0aFwiLCAyNTMgLSBVSUQudG9TdHJpbmcoKS5sZW5ndGggLSBVU0VSTkFNRS5sZW5ndGgpO1xuICAgIC8vIGBbUmVwb3J0XSBgIGlzIHNpbXBseSBhZGRlZCBhdCB0aGUgYmVnaW5uaW5nIG9mIG1lc3NhZ2VzXG4gICAgJChcIiNyZXBvcnQtbWVzc2FnZVwiKS5wcm9wKFwibWF4TGVuZ3RoXCIsIDMyNCAtIDkpO1xuXG4gICAgLy8gQXV0by1yZXNpemUgY2hhdCBpbnB1dCAoYWRhcHRlZCBmcm9tIGh0dHBzOi8vd3d3LmltcHJlc3NpdmV3ZWJzLmNvbS90ZXh0YXJlYS1hdXRvLXJlc2l6ZS8pXG4gICAgLy8gU2V0IHVwIGlucHV0IGFuZCBkdXBsaWNhdGVkIGRpdlxuICAgIHZhciBpbnB1dCA9ICQoJyNjaGF0LWlucHV0JyksXG4gICAgaGlkZGVuRGl2ID0gJzxkaXYgaWQ9XCJjaGF0LWlucHV0LWhpZGRlblwiPjwvZGl2PicsXG4gICAgY29udGVudCA9IG51bGw7XG4gICAgJChoaWRkZW5EaXYpLmluc2VydEFmdGVyKFwiI2NoYXQtaW5wdXRcIik7XG4gICAgaGlkZGVuRGl2ID0gJChcIiNjaGF0LWlucHV0LWhpZGRlblwiKTtcbiAgICBpbnB1dC5jc3MoXCJvdmVyZmxvd1wiLCBcImhpZGRlblwiKTtcblxuICAgIGlucHV0Lm9uKCdrZXlkb3duIGtleXByZXNzIGtleXVwJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnRlbnQgPSBtZC5yZW5kZXJJbmxpbmUoJCh0aGlzKS52YWwoKSk7XG4gICAgICAgIC8vIEZpbGwgY29udGVudCBhcHJvcHJpYXRlbHlcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gICAgICAgIGhpZGRlbkRpdi5odG1sKGNvbnRlbnQgKyAnJyk7XG4gICAgICAgIC8vIERldGVybWluZSBoZWlnaHQgZnJvbSBkdXBsaWNhdGUgZGl2XG4gICAgICAgICQodGhpcykuY3NzKCdoZWlnaHQnLCBoaWRkZW5EaXYuaGVpZ2h0KCkpO1xuICAgIH0pO1xuICAgIC8vIE1lc3NhZ2Ugb3B0aW9ucyBtZW51XG4gICAgJChcIiNjaGF0LXRhYnNcIikuY29udGV4dG1lbnUoe1xuICAgICAgICBkZWxlZ2F0ZTogXCIuY2hhdC1tZXNzYWdlLW9wdGlvbnNcIixcbiAgICAgICAgcHJldmVudFNlbGVjdDogdHJ1ZSxcbiAgICAgICAgYXV0b1RyaWdnZXI6IGZhbHNlLFxuICAgICAgICBhZGRDbGFzczogXCJtZXNzYWdlLW9wdGlvbnMtbWVudVwiLFxuICAgICAgICBwb3NpdGlvbjoge215OiBcInJpZ2h0LTEwIGNlbnRlci0xNVwifSxcbiAgICAgICAgbWVudTogW1xuICAgICAgICAgICAge3RpdGxlOiBcIlVzZXIgT3B0aW9uc1wiLCBjbWQ6XCJoZWFkZXJcIiwgaXNIZWFkZXI6IHRydWV9LFxuICAgICAgICAgICAge3RpdGxlOiBcIlJlcG9ydCBVc2VyL01lc3NhZ2VcIiwgY21kOiBcInJlcG9ydFwifSxcbiAgICAgICAgICAgIHt0aXRsZTogXCJJZ25vcmUgVXNlclwiLCBjbWQ6IFwiaWdub3JlXCIsIGRpc2FibGVkOiBmdW5jdGlvbihldmVudCwgdWkpIHsgcmV0dXJuIGlnbm9yZWRVc2Vycy5pbmNsdWRlcyh1c2VybmFtZUZyb21PcHRpb25zKHVpLnRhcmdldCkpID8gJ2hpZGUnIDogZmFsc2UgfX0sXG4gICAgICAgICAgICB7dGl0bGU6IFwiVW5pZ25vcmUgVXNlclwiLCBjbWQ6IFwidW5pZ25vcmVcIiwgZGlzYWJsZWQ6IGZ1bmN0aW9uKGV2ZW50LCB1aSl7IHJldHVybiAhaWdub3JlZFVzZXJzLmluY2x1ZGVzKHVzZXJuYW1lRnJvbU9wdGlvbnModWkudGFyZ2V0KSkgPyAnaGlkZScgOiBmYWxzZX19LFxuICAgICAgICBdLFxuICAgICAgICBiZWZvcmVPcGVuOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgICAkKFwiI2NoYXQtdGFic1wiKS5jb250ZXh0bWVudShcInNldFRpdGxlXCIsIFwiaGVhZGVyXCIsIHVzZXJuYW1lRnJvbU9wdGlvbnModWkudGFyZ2V0KSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdDogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHVpLmNtZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJyZXBvcnRcIjpcbiAgICAgICAgICAgICAgICAgICAgJChcIiNyZXBvcnQtcmVwb3J0XCIpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJpZ25vcmVcIjpcbiAgICAgICAgICAgICAgICAgICAgJChcIiNyZXBvcnQtaWdub3JlXCIpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ1bmlnbm9yZVwiOlxuICAgICAgICAgICAgICAgICAgICB1bmlnbm9yZVVzZXIodXNlcm5hbWVGcm9tT3B0aW9ucyh1aS50YXJnZXQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCQodWkudGFyZ2V0KS5wYXJlbnQoKS5oYXNDbGFzcygnY2hhdC1tZXNzYWdlJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgbXNnID0gJCh1aS50YXJnZXQpLnBhcmVudCgpLmNoaWxkcmVuKFwiLmNoYXQtbWVzc2FnZS1jb250ZW50XCIpO1xuICAgICAgICAgICAgICAgICQoXCIjcmVwb3J0LXVzZXJuYW1lXCIpLnZhbCh1c2VybmFtZUZyb21PcHRpb25zKHVpLnRhcmdldCkpO1xuICAgICAgICAgICAgICAgICQoXCIjcmVwb3J0LXVpZFwiKS52YWwobXNnLmNoaWxkcmVuKFwiLmNoYXQtbWVzc2FnZS11c2VyLWxpbmtcIikucHJvcChcImhyZWZcIikubWF0Y2goL3BsYXllclxcLyhcXGQrKS8pWzFdKTtcbiAgICAgICAgICAgICAgICB2YXIgdGltZSA9IG1zZy5jaGlsZHJlbihcIi5jaGF0LW1lc3NhZ2UtdGltZVwiKS50ZXh0KCkubWF0Y2goLyhcXGQrKTooXFxkKykgKChBTSl8KFBNKSkvKTtcbiAgICAgICAgICAgICAgICAkKFwiI3JlcG9ydC10aW1lXCIpLnZhbChcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNpbmcgYSByYW5kb20gZGF0ZSwgYXMgd2Ugb25seSBuZWVkIHRoZSB0aW1lXG4gICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKFwiSmFuIDEgMjAwMCBcIiArIHRpbWVbMV0gKyBcIjpcIiArIHRpbWVbMl0gKyBcIiBcIiArIHRpbWVbM10pXG4gICAgICAgICAgICAgICAgICAgIC50b1VUQ1N0cmluZygpLm1hdGNoKC8oPzpcXGQrOj8pKyBHTVQkLylbMF0ucmVwbGFjZShcIkdNVFwiLCBcIlVUQ1wiKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgJChcIiNyZXBvcnQtb2ZmZW5kaW5nLW1lc3NhZ2VcIikudmFsKG1zZy5jaGlsZHJlbihcIi5jaGF0LW1lc3NhZ2UtbWVzc2FnZVwiKS50ZXh0KCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkKHVpLnRhcmdldCkucGFyZW50KCkuaGFzQ2xhc3MoJ2NoYXQtdXNlcmxpc3QtdXNlcicpKSB7XG4gICAgICAgICAgICAgICAgJChcIiNyZXBvcnQtdXNlcm5hbWVcIikudmFsKHVzZXJuYW1lRnJvbU9wdGlvbnModWkudGFyZ2V0KSk7XG4gICAgICAgICAgICAgICAgJChcIiNyZXBvcnQtdWlkXCIpLnZhbCgkKHVpLnRhcmdldCkucGFyZW50KCkuY2hpbGRyZW4oKS5lcSgwKS5wcm9wKFwiaHJlZlwiKS5tYXRjaCgvcGxheWVyXFwvKFxcZCspLylbMV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKFwiI3JlcG9ydC1kaWFsb2dcIikuZGlhbG9nKFwib3BlblwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoXCIjY2hhdC10YWJzXCIpLm9uKFwiY2xpY2tcIiwgXCIuY2hhdC1tZXNzYWdlLW9wdGlvbnNcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIjY2hhdC10YWJzXCIpLmNvbnRleHRtZW51KFwib3BlblwiLCAkKHRoaXMpKTtcbiAgICB9KTtcbiAgICAkKFwiI3JlcG9ydC1kaWFsb2dcIikuZGlhbG9nKHtcbiAgICAgICAgZGlhbG9nQ2xhc3M6IFwicmVwb3J0LWRpYWxvZ1wiLFxuICAgICAgICBhdXRvT3BlbjogZmFsc2UsXG4gICAgICAgIG1pbkhlaWdodDogMCxcbiAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgICAgICBwb3NpdGlvbjoge2F0OiAnY2VudGVyIGNlbnRlci0zMHB4J31cbiAgICB9KTtcbiAgICAkKFwiI3JlcG9ydC1yZXBvcnRcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIjcmVwb3J0LW1lc3NhZ2VcIikucGFyZW50KCkudG9nZ2xlKCk7XG4gICAgfSk7XG4gICAgJChcIiNyZXBvcnQtY2FuY2VsXCIpLmNsaWNrKGNsb3NlUmVwb3J0RGlhbG9nKTtcbiAgICAkKFwiI3JlcG9ydC1zdWJtaXRcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKFwiI3JlcG9ydC1pZ25vcmVcIikucHJvcChcImNoZWNrZWRcIikgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWdub3JlVXNlcigkKFwiI3JlcG9ydC11c2VybmFtZVwiKS52YWwoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJChcIiNyZXBvcnQtcmVwb3J0XCIpLnByb3AoXCJjaGVja2VkXCIpID09IHRydWUpIHtcbiAgICAgICAgICAgIHNvY2suc2VuZChcbiAgICAgICAgICAgICAgICBcIlBSSVZNU0cgI29wcy1ub3RpZmljYXRpb25zIDpbUkVQT1JUXSBSZXBvcnRpbmcge3VzZXJuYW1lfSAoe3VpZH0pIGJ5IHtjdXJyX3VzZXJuYW1lfSAoe2N1cnJfdWlkfSkuXFxyXFxuXCJcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcInt1c2VybmFtZX1cIiwgJChcIiNyZXBvcnQtdXNlcm5hbWVcIikudmFsKCkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJ7dWlkfVwiLCAkKFwiI3JlcG9ydC11aWRcIikudmFsKCkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoXCJ7dGltZX1cIiwgJChcIiNyZXBvcnQtdGltZVwiKS52YWwoKSAhPSAnJyA/IFwiIFJlcG9ydGVkIG1lc3NhZ2Ugc2VudCBhdCBcIiArICQoXCIjcmVwb3J0LXRpbWVcIikudmFsKCkgOiAnJylcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIntjdXJyX3VzZXJuYW1lfVwiLCBVU0VSTkFNRSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZShcIntjdXJyX3VpZH1cIiwgVUlEKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICgkKFwiI3JlcG9ydC1vZmZlbmRpbmctbWVzc2FnZVwiKS52YWwoKSAhPSAnJykge1xuICAgICAgICAgICAgICAgIHNvY2suc2VuZChcIlBSSVZNU0cgI29wcy1ub3RpZmljYXRpb25zIDpbUkVQT1JURUQgTUVTU0FHRV0gXCIgKyAkKFwiI3JlcG9ydC1vZmZlbmRpbmctbWVzc2FnZVwiKS52YWwoKSArIFwiXFxyXFxuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc29jay5zZW5kKFwiUFJJVk1TRyAjb3BzLW5vdGlmaWNhdGlvbnMgOltSRVBPUlQgUkVBU09OXSBcIiArICQoXCIjcmVwb3J0LW1lc3NhZ2VcIikudmFsKCkgKyBcIlxcclxcblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsb3NlUmVwb3J0RGlhbG9nKCk7XG4gICAgfSlcbiAgICAvLyBLZXkgYmluZGluZ3NcbiAgICAkKCcjY2hhdC1pbnB1dCcpLmtleXByZXNzKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcbiAgICAgICAgICAgIC8vIEhpdCBlbnRlciBpbiBjaGF0XG4gICAgICAgICAgICBzZW5kTWVzc2FnZSgkKCcjY2hhdC1pbnB1dCcpLnZhbCgpKTtcbiAgICAgICAgICAgICQoJyNjaGF0LWlucHV0JykudmFsKCcnKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoXCIjcmVjb25uZWN0XCIpLmNsaWNrKGluaXRTb2NrKTtcblxufSk7XG5cbmZ1bmN0aW9uIHNlbmRNZXNzYWdlKG1lc3NhZ2Upe1xuICAgIHZhciBpc0FjdGlvbiA9IGZhbHNlO1xuICAgIHZhciBjaGFubmVsID0gXCIjXCIgKyBDSEFOTkVMO1xuICAgIC8vIE5vIHBvc3RpbmcgYXMgYW5ub24gb3IgaWYgbm90aGluZyBoYXMgYmVlbiBhY3R1YWxseSBwb3N0ZWRcbiAgICBpZiAoVVNFUk5BTUUgIT09IFwiQW5vbnltb3VzXCIgJiYgbWVzc2FnZS50cmltKCkgIT09ICcnKSB7XG4gICAgICAgIHZhciBtZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdmFyIHBvc3QgPSB0cnVlO1xuICAgICAgICAvLyBDaGF0IGNvbW1hbmRzXG4gICAgICAgIGlmIChtZXNzYWdlLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgICB2YXIgcG9zdCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGNvbW1hbmQgPSBtZXNzYWdlLm1hdGNoKC9eXFwvKFteIF0rKS8pWzFdO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gbWVzc2FnZS5tYXRjaCgvXlxcL1xcdysgKC4rKS8pWzFdO1xuICAgICAgICAgICAgfSBjYXRjaChlKXt9XG4gICAgICAgICAgICBzd2l0Y2ggKGNvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiaGVscFwiOlxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2gocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibWVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShcIi9tZTogUG9zdHMgbWVzc2FnZSBmb3JtYXR0ZWQgYXMgYW4gYWN0aW9uXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCJVc2FnZTogL21lIDxtZXNzYWdlPlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShcIkV4YW1wbGU6IC9tZSBsYXVnaHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaWdub3JlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCIvaWdub3JlOiBEb24ndCBzaG93IG1lc3NhZ2VzIGZyb20gYSBwYXJ0aWN1bGFyIHVzZXIuIFNob3cgY3VycmVudGx5IGlnbm9yZWQgdXNlcnMgd2l0aCAvaWdub3JlLWxpc3QuIFVuaWdub3JlIHVzZXIgd2l0aCAvdW5pZ25vcmUuXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCJVc2FnZTogL2lnbm9yZSA8dXNlcm5hbWU+XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlKFwiRXhhbXBsZTogL2lnbm9yZSBwbGF5ZXIxXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImlnbm9yZS1saXN0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCIvaWdub3JlLWxpc3Q6IFNob3dzIGN1cnJlbnRseSBpZ25vcmVkIHVzZXJzLiBJZ25vcmUgYSB1c2VyIHdpdGggL2lnbm9yZS4gVW5pZ25vcmUgdXNlciB3aXRoIC91bmlnbm9yZS5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShcIlVzYWdlOiAvaWdub3JlLWxpc3RcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCJFeGFtcGxlOiAvaWdub3JlLWxpc3RcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidW5pZ25vcmVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShcIi91bmlnbm9yZTogU2hvd3MgbWVzc2FnZXMgZnJvbSBhIHVzZXIgYWZ0ZXIgYmVpbmcgaWdvcmVkLiBVbmlnbm9yZXMgYWxsIHVzZXJzIHdoZW4gdXNlcm5hbWUgaXMgKi4gSWdub3JlIGEgdXNlciB3aXRoIC9pZ25vcmUuIFNob3cgY3VycmVudGx5IGlnbm9yZWQgdXNlcnMgd2l0aCAvaWdub3JlLWxpc3QuXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCJVc2FnZTogL3VuaWdub3JlIDx1c2VybmFtZT5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCJFeGFtcGxlOiAvdW5pZ25vcmUgcGxheWVyMVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShcIkV4YW1wbGU6IC91bmlnbm9yZSAqXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShcIkF2YWlsYWJsZSBjb21tYW5kczogaGVscCwgbWUsIGlnbm9yZSwgaWdub3JlLWxpc3QsIHVuaWdub3JlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlKFwiVHlwZSAvaGVscCA8Y29tbWFuZD4gZm9yIGluZm9ybWF0aW9uIG9uIGluZGl2aWR1YWwgY29tbWFuZHNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCJFeGFtcGxlOiAvaGVscCBtZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShcIkFkZGl0aW9uYWwgY29tbWFuZHMgYXZhaWxhYmxlIHZpYSBMaW5rQm90IChzZWUgdGhlIFt3aWtpXShodHRwOi8vZXRlcm5hd2lraS5vcmcvd2lraS9pbmRleC5waHA1L0hFTFApIGZvciBtb3JlIGluZm9ybWF0aW9uKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwibWVcIjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJhbXMpeyBwb3N0TWVzc2FnZShcIlBsZWFzZSBpbmNsdWRlIGNvbW1hbmQgcGFyYW1ldGVycy4gVHlwZSAvaGVscCBtZSBmb3IgdXNhZ2UgaW5zdHJ1Y3Rpb25zXCIpOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpc0FjdGlvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHBvc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gcGFyYW1zO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiaWdub3JlXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1zKXsgcG9zdE1lc3NhZ2UoXCJQbGVhc2UgaW5jbHVkZSBjb21tYW5kIHBhcmFtZXRlcnMuIFR5cGUgL2hlbHAgaWdub3JlIGZvciBtb3JlIHVzYWdlIGluc3RydWN0aW9uc1wiKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWdub3JlVXNlcihwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiaWdub3JlLWxpc3RcIjpcbiAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCJDdXJyZW50bHkgaWdub3JlZCB1c2VyczogXCIgKyBpZ25vcmVkVXNlcnMuam9pbihcIiwgXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInVuaWdub3JlXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW1zKXsgcG9zdE1lc3NhZ2UoXCJQbGVhc2UgaW5jbHVkZSBjb21tYW5kIHBhcmFtZXRlcnMuIFR5cGUgL2hlbHAgdW5pZ25vcmUgZm9yIG1vcmUgdXNhZ2UgaW5zdHJ1Y3Rpb25zXCIpOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICB1bmlnbm9yZVVzZXIocGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShcIkludmFsaWQgY29tbWFuZC4gVHlwZSAvaGVscCBmb3IgbW9yZSBhdmFpbGFibGUgY29tbWFuZHNcIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBvc3QpIHtcbiAgICAgICAgICAgIC8vIFNvIEZsYXNoIGNoYXQgZG9lc24ndCBicmVha1xuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UucmVwbGFjZSgvPC9nLCBcIiZsdDtcIikucmVwbGFjZSgvPi9nLCBcIiZndDtcIik7XG4gICAgICAgICAgICAvLyBGb3JtYXQgdGltZSB0byB3b3JrIHdpdGggRmxhc2ggY2hhdFxuICAgICAgICAgICAgLy8gVE9ETzogQ291bGQgdXNlIGEgcmVmYWN0b3IsIG1pZ2h0IGJlIGFibGUgdG8gcmVtb3ZlIHRoaXMgbmVjZXNzaXR5IGFmdGVyIEZsYXNoIGlzIHJlbW92ZWQpXG4gICAgICAgICAgICBpZiAoaXNBY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gVUlEICsgJ188ST48Rk9OVCBDT0xPUj1cIiNDMERDRTdcIj4nICsgVVNFUk5BTUUgKyBcIjwvRk9OVD48L0k+X1wiICsgbmV3IERhdGUoKS50b1VUQ1N0cmluZygpLnJlcGxhY2UoLyhNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLCAoWzAtM11cXGQpIChKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgKFxcZHs0fSkgKFswLTJdXFxkKD86OlswLTZdXFxkKXsyfSkgR01ULywgXCIkMSAkMyAkMiAkNSAkNCBVVENcIikgKyBcIl88ST5cIiArIG1lc3NhZ2UgKyBcIjwvST5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFVJRCArIFwiX1wiICsgVVNFUk5BTUUgKyBcIl9cIiArIG5ldyBEYXRlKCkudG9VVENTdHJpbmcoKS5yZXBsYWNlKC8oTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSwgKFswLTNdXFxkKSAoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpIChcXGR7NH0pIChbMC0yXVxcZCg/OjpbMC02XVxcZCl7Mn0pIEdNVC8sIFwiJDEgJDMgJDIgJDUgJDQgVVRDXCIpICsgXCJfXCIgKyBtZXNzYWdlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc29jay5zZW5kKFwiUFJJVk1TRyBcIiArIGNoYW5uZWwgKyBcIiA6XCIgKyBtZXNzYWdlICsgXCJcXHJcXG5cIik7XG4gICAgICAgICAgICBwb3N0TWVzc2FnZShtZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluaXRTb2NrKCkge1xuICAgIGNsZWFySW50ZXJ2YWwodGltZXJJbnRlcnZhbCk7XG4gICAgJChcIiNyZWNvbm5lY3RcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgJChcIiNyZWNvbm5lY3RcIikucHJvcCgnb25jbGljaycsIG51bGwpO1xuICAgICQoXCIjY2hhdC1sb2FkaW5nID4gI2Nvbm5lY3RpbmdcIikuc2hvdygpO1xuICAgICQoXCIjY2hhdC1sb2FkaW5nID4gI2ZhaWxlZFwiKS5oaWRlKCk7XG5cbiAgICBzb2NrID0gbmV3IFNvY2tKUyhcImh0dHBzOi8vaXJjLmV0ZXJuYWdhbWUub3JnL2NoYXR3c1wiLCBbXSwgeyB0cmFuc3BvcnRzOiBbJ3dlYnNvY2tldCcsICd4aHItc3RyZWFtaW5nJywgJ3hkci1zdHJlYW1pbmcnLCAnZXZlbnRzb3VyY2UnLCAnaWZyYW1lLWV2ZW50c291cmNlJywgJ2h0bWxmaWxlJywgJ2lmcmFtZS1odG1sZmlsZScsICd4aHItcG9sbGluZycsICd4ZHItcG9sbGluZycsICdpZnJhbWUteGhyLXBvbGxpbmcnXSB9KTtcbiAgICAvLyBJbml0aWFsIENoYXQgQ29ubmVjdGlvblxuICAgIHNvY2sub25vcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNvY2suc2VuZChcIk5JQ0sgXCIgKyBOSUNLICsgXCJcXHJcXG5cIik7XG4gICAgICAgIHNvY2suc2VuZChcIlVTRVIgXCIgKyBcImFub25cIiArIFwiIDAgKiA6XCIgKyBVU0VSTkFNRSArIFwiXFxyXFxuXCIpO1xuICAgIH07XG5cbiAgICAvLyBBdHRlbXB0IHRvIHJlY29ubmVjdFxuICAgIHNvY2sub25jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInNvY2sgY2xvc2VkIG5vcm1hbGx5XCIpO1xuICAgICAgICBvbkRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gICAgc29jay5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwic29jayBjbG9zZWQgYnkgYW4gZXJyb3JcIik7XG4gICAgICAgIG9uRGlzY29ubmVjdCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvbkRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIGNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAkKFwiI3JlY29ubmVjdFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJChcIiNnbG9iYWwtY2hhdC1tZXNzYWdlc1wiKS5hcHBlbmQoJChcImNoYXQtbG9hZGluZ1wiKS5kZXRhY2goKSk7XG4gICAgICAgICQoXCIjY2hhdC1sb2FkaW5nXCIpLnNob3coKTtcbiAgICAgICAgaWYgKGZhaWxlZEF0dGVtcHRzID09IDApIHtcbiAgICAgICAgICAgICQoXCIjY2hhdC1sb2FkaW5nID4gI2Nvbm5lY3RpbmdcIikuc2hvdygpO1xuICAgICAgICAgICAgZmFpbGVkQXR0ZW1wdHMrKztcbiAgICAgICAgICAgIGluaXRTb2NrKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50VGltZXIgPSBkaXNjb25uZWN0aW9uVGltZXJzW01hdGgubWluKGZhaWxlZEF0dGVtcHRzIC0gMSwgMyldO1xuICAgICAgICAgICAgJChcIiNjaGF0LWxvYWRpbmcgPiAjY29ubmVjdGluZ1wiKS5oaWRlKCk7XG4gICAgICAgICAgICAkKFwiI2NoYXQtbG9hZGluZyA+ICNmYWlsZWRcIikuc2hvdygpO1xuICAgICAgICAgICAgJChcIiNjaGF0LWxvYWRpbmcgPiAjZmFpbGVkID4gI3RpbWVyXCIpLnRleHQoY3VycmVudFRpbWVyKTtcbiAgICAgICAgICAgICQoXCIjcmVjb25uZWN0XCIpLnNob3coKTtcbiAgICAgICAgICAgICQoJyNjaGF0LWlucHV0JykuaGlkZSgpO1xuICAgICAgICAgICAgZmFpbGVkQXR0ZW1wdHMrKztcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXJJbnRlcnZhbCk7XG4gICAgICAgICAgICB0aW1lckludGVydmFsID0gc2V0SW50ZXJ2YWwodXBkYXRlVGltZXIsIDEwMDApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBmdW5jdGlvbiB1cGRhdGVUaW1lcigpIHtcbiAgICAgICAgY3VycmVudFRpbWVyLS07XG4gICAgICAgICQoXCIjY2hhdC1sb2FkaW5nID4gI2ZhaWxlZCA+ICN0aW1lclwiKS50ZXh0KGN1cnJlbnRUaW1lcik7XG4gICAgICAgIGlmIChjdXJyZW50VGltZXIgPD0gMCkge1xuICAgICAgICAgICAgaW5pdFNvY2soKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNvY2sub25tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgY29tbWFuZHMgPSBwYXJzZUNvbW1hbmRzKGUuZGF0YSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29tbWFuZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjbWQgPSBjb21tYW5kc1tpXTtcbiAgICAgICAgICAgIHN3aXRjaCAoY21kLmNvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiUElOR1wiOlxuICAgICAgICAgICAgICAgICAgICBzb2NrLnNlbmQoXCJQT05HIDowLjAuMC4wXFxyXFxuXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiNDMzXCI6XG4gICAgICAgICAgICAgICAgICAgIC8vIE5pY2sgYWxyZWFkeSB1c2VkLCB0cnkgd2l0aCBmYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmlja051bSA9IHBhcnNlSW50KE5JQ0subWF0Y2goL1xcXihcXGQrKS8pWzFdKSArIDE7XG4gICAgICAgICAgICAgICAgICAgIE5JQ0sgPSBOSUNLLnJlcGxhY2UoL1xcXihcXGQrKS8sIFwiXlwiICsgbmlja051bSk7XG4gICAgICAgICAgICAgICAgICAgIHNvY2suc2VuZChcIk5JQ0sgXCIgKyBOSUNLICsgXCJcXHJcXG5cIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCIwMDFcIjpcbiAgICAgICAgICAgICAgICAgICAgLy8gUlBMX1dFTENPTUVcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBdXRoZW50aWNhdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBzb2NrLnNlbmQoXCJVU0VSSE9TVCBcIiArIE5JQ0sgKyBcIlxcclxcblwiKTtcbiAgICAgICAgICAgICAgICAgICAgc29jay5zZW5kKFwiSk9JTiAjXCIgKyBDSEFOTkVMICsgXCJcXHJcXG5cIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCIzMDJcIjpcbiAgICAgICAgICAgICAgICAgICAgLy8gUlBMX1VTRVJIT1NUXG4gICAgICAgICAgICAgICAgICAgIEhPU1ROQU1FID0gY21kLnBhcmFtc1sxXS5yZXBsYWNlKE5JQ0ssICcnKS5tYXRjaCgvXlxcKj89KD86XFwrfC0pKC4qKSQvKVsxXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkpPSU5cIjpcbiAgICAgICAgICAgICAgICAgICAgZmFpbGVkQXR0ZW1wdHMgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmljayA9IGNtZC5vcmlnaW4uc3BsaXQoXCIhXCIpWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmljayA9PSBOSUNLKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkpvaW5lZCBcIiArIGNtZC5wYXJhbXNbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJMb2FkaW5nIGhpc3RvcnkuLi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmdldChcImh0dHBzOi8vaXJjLmV0ZXJuYWdhbWUub3JnL2hpc3RvcnlcIiwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSGlzdG9yeSByZWNpZXZlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBkYXRhLnRyaW0oKS5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3ROZXdNZXNzYWdlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbWVzc2FnZXMubGVuZ3RoOyBqKyspXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3N0ZWRNZXNzYWdlcy5pbmRleE9mKG1lc3NhZ2VzW2pdLnRyaW0oKSkgPT0gLTEpIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3RDb25uZWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShcIlJlY29ubmVjdGVkIHRvIGNoYXQgLSBTb21lIG1lc3NhZ2VzIG1pZ2h0IGJlIG1pc3NpbmcgaWYgeW91IHdlcmUgYXdheSBmb3IgYSBsb25nIHRpbWVcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGogPCBtZXNzYWdlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShtZXNzYWdlc1tqXSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICh0b0JlUG9zdGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZSh0b0JlUG9zdGVkLnNoaWZ0KCksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdENvbm5lY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcmVjb25uZWN0XCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2NoYXQtbG9hZGluZ1wiKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNjaGF0LWlucHV0XCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiZGl2I2NoYXQtbG9hZGluZ1wiKS5kZXRhY2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2NoYXQtdGFic1wiKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2NoYXQtdGFic1wiKS5jaGlsZHJlbigpLm1DdXN0b21TY3JvbGxiYXIoXCJzY3JvbGxUb1wiLCBcImJvdHRvbVwiLCB7Y2FsbGJhY2tzOiBmYWxzZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFVTRVJOQU1FICE9PSBcIkFub255bW91c1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjY2hhdC1pbnB1dFwiKS5wcm9wKFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2NoYXQtaW5wdXRcIikuYXR0cihcInBsYWNlaG9sZGVyXCIsIFwiUGxlYXNlIGxvZyBpbiB0byBjaGF0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRVc2VyKGNtZC5vcmlnaW4uc3BsaXQoXCIhXCIpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiMzMxXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIjMzMlwiOlxuICAgICAgICAgICAgICAgICAgICAvLyBUb3BpYywgZGlzcGxheT9cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgLy8gUGFydCBhbmQgcXVpdCBib3RoIG5lZWQgdG8gYmUgaGFuZGxlZCB0aGUgc2FtZSB3YXkgaW4gb3VyIGNhc2UgLSBhIHVzZXIgbGVmdCB0aGUgcm9vbVxuICAgICAgICAgICAgICAgIGNhc2UgXCJQQVJUXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIlFVSVRcIjpcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVXNlcihjbWQub3JpZ2luLnNwbGl0KFwiIVwiKVswXSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCIzNTNcIjpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJzID0gY21kLnBhcmFtc1szXS50cmltKCkuc3BsaXQoXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHVzZXJzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRVc2VyKHVzZXJzW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiMzY2XCI6XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpZ25pZmllcyBlbmQgb2YgbmFtZXMsIGRvbid0IHRoaW5rIHRoaXMgaXMgbmVlZGVkP1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiTk9USUNFXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIlBSSVZNU0dcIjpcbiAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoY21kLnBhcmFtc1sxXSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiTU9ERVwiOlxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyBiZWVuIGJhbm5lZCwgaWYgc28gZGlzYWJsZSBpbnB1dCBhbmQgbm90aWZ5IGluIGNoYXRcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogSGFuZGxlIGV4dGVuZGVkIGJhbnNcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogSGFuZGxlIG11bHRpcGxlIG1vZGVzIGJlaW5nIHNldC91bnNldCBhdCBvbmNlXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbWQucGFyYW1zWzFdID09IFwiK2JcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChOSUNLICsgJyEnICsgSE9TVE5BTUUpLm1hdGNoKG5ldyBSZWdFeHAoY21kLnBhcmFtc1syXS5yZXBsYWNlKC9cXCovZywgXCIuK1wiKS5yZXBsYWNlKFwiXlwiLCBcIlxcXFxeXCIpKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2NoYXQtaW5wdXRcIikucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZShcIllvdSBoYXZlIGJlZW4gYmFubmVkIGZyb20gY2hhdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjbWQucGFyYW1zWzFdID09IFwiLWJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChOSUNLICsgJyEnICsgSE9TVE5BTUUpLm1hdGNoKG5ldyBSZWdFeHAoY21kLnBhcmFtc1syXS5yZXBsYWNlKC9cXCovZywgXCIuK1wiKS5yZXBsYWNlKFwiXlwiLCBcIlxcXFxeXCIpKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2NoYXQtaW5wdXRcIikucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCJZb3UgYXJlIG5vdyBhbGxvd2VkIHRvIHBvc3QgaW4gY2hhdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyBiZWVuIGtpY2tlZCwgaWYgc28gZGlzYWJsZSBpbnB1dCBhbmQgbm90aWZ5IGluIGNoYXQsIGlmIG90aGVyIHVzZXIgcmVtb3ZlIHRoZW0gZnJvbSBvbmxpbmUgbGlzdFxuICAgICAgICAgICAgICAgIGNhc2UgXCJLSUNLXCI6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbWQucGFyYW1zWzFdID09IE5JQ0spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjY2hhdC1pbnB1dFwiKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCJZb3UgaGF2ZSBiZWVuIGtpY2tlZCBmcm9tIGNoYXRcIiArIChjbWQucGFyYW1zWzJdID8gXCIgLSBcIiArIGNtZC5wYXJhbXNbMl0gOiAnJykpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVXNlcihjbWQucGFyYW1zWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiNDA0XCI6XG4gICAgICAgICAgICAgICAgICAgIC8vIENhbid0IHBvc3QgbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZiAoY21kLnBhcmFtc1syXS5zdGFydHNXaXRoKFwiWW91IGFyZSBiYW5uZWRcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjY2hhdC1pbnB1dFwiKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2UoXCJZb3UgYXJlIG5vdCBhbGxvd2VkIHRvIHBvc3QgaW4gY2hhdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiNDc0XCI6XG4gICAgICAgICAgICAgICAgICAgIC8vIENhbid0IGpvaW4gY2hhbm5lbFxuICAgICAgICAgICAgICAgICAgICBpZiAoY21kLnBhcmFtc1sxXSA9PSBcIkNhbm5vdCBqb2luIGNoYW5uZWwgKCtiKVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2NoYXQtaW5wdXRcIikucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlKFwiWW91IGhhdmUgYmVlbiBiYW5uZWQgZnJvbSBjaGF0XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBpbmZvcm1hdGlvbiBzdHVmZlxuICAgICAgICAgICAgICAgIGNhc2UgXCIwMDJcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiMDAzXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIjAwNFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCIwMDVcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiMjUxXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIjI1MlwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCIyNTNcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiMjU0XCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIjI1NVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCIyNjVcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiMjY2XCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIjMzM1wiOlxuICAgICAgICAgICAgICAgIC8vIFRvcGljIHNldCBieSBfIGF0IF9cbiAgICAgICAgICAgICAgICBjYXNlIFwiNDIyXCI6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbQ2hhdF0gVW5oYW5kbGVkIGNvbW1hbmQgcmVjaWV2ZWQuIENvbW1hbmQ6IFwiICsgY21kLmNvbW1hbmQgKyBcIiBPcmlnaW46IFwiICsgY21kLm9yaWdpbiArIFwiIFBhcmFtczogXCIgKyBjbWQucGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfTtcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHNjcmVlbnNob3RIb29rLCBmYWxzZSk7XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgc2Nyb2xsSG9vaywgZmFsc2UpO1xuXG5mdW5jdGlvbiBzY3JlZW5zaG90SG9vayhldmVudCkge1xuICAgIGlmIChldmVudC5vcmlnaW4ubWF0Y2goL2h0dHBzPzpcXC9cXC8oKDEyNy4wLjAuMSl8KGxvY2FsaG9zdCl8KCguKlxcLik/ZXRlcm5hZ2FtZVxcLm9yZyl8KCguKlxcLj8pZXRlcm5hZGV2XFwub3JnKSkvKS5sZW5ndGggIT09IDApXG4gICAgICAgIGlmIChldmVudC5kYXRhLnR5cGUgPT09ICdjaGF0LW1lc3NhZ2UnKVxuICAgICAgICAgICAgc2VuZE1lc3NhZ2UoZXZlbnQuZGF0YS5jb250ZW50KTtcbn1cblxuZnVuY3Rpb24gc2Nyb2xsSG9vayhldmVudCl7XG4gICAgaWYgKGV2ZW50Lm9yaWdpbi5tYXRjaCgvaHR0cHM/OlxcL1xcLygoMTI3LjAuMC4xKXwobG9jYWxob3N0KXwoKC4qXFwuKT9ldGVybmFnYW1lXFwub3JnKXwoKC4qXFwuPylldGVybmFkZXZcXC5vcmcpKS8pLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBpZiAoZXZlbnQuZGF0YS50eXBlID09PSAnY2hhdC1zY3JvbGwnKSB7XG4gICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICQoXCIjY2hhdC10YWItZ2xvYmFsXCIpLm1DdXN0b21TY3JvbGxiYXIoXCJzY3JvbGxUb1wiLCBcImJvdHRvbVwiLCB7Y2FsbGJhY2tzOiBmYWxzZX0pO1xuICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICBjaGF0QXV0b1Njcm9sbCA9IFwiYm90dG9tXCI7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZVZpc2liaWxpdHkoKXtcbiAgICAkKCcjbWluaW1pemF0aW9uLXRyaWFuZ2xlJykudG9nZ2xlQ2xhc3MoJ2ZsaXBwZWQnKTtcbiAgICAkKCcjY2hhdC1jb250ZW50JykuZmFkZVRvZ2dsZSgnZmFzdCcpO1xuICAgICQoJy50YWInKS5mYWRlVG9nZ2xlKCdmYXN0Jyk7XG4gICAgaWYoJCgnI2NoYXQtY29udGVudCcpLmNzcygnZGlzcGxheScpICE9PSAnbm9uZScpXG4gICAgICAgICQoXCIjY2hhdC10YWItZ2xvYmFsXCIpLm1DdXN0b21TY3JvbGxiYXIoXCJzY3JvbGxUb1wiLCAnYm90dG9tJyk7XG5cbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9jaGF0LmpzXG4vLyBtb2R1bGUgaWQgPSAuL3NyYy9qcy9jaGF0LmpzXG4vLyBtb2R1bGUgY2h1bmtzID0gMSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/js/chat.js\n");

/***/ }),

/***/ "./src/js/define-user.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CHAT_CHANNEL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return CURRENT_USER; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return WORKBRANCH; });\nvar CURRENT_USER = {}\nvar CHAT_CHANNEL = \"global\";\nvar WORKBRANCH = \"eternagame.org\";\n\nlocation.search.slice(1).split(\"&\").forEach(function(item){\n    var param = item.split(\"=\")[0];\n    if (param == \"name\" || param == \"uid\") {\n        CURRENT_USER[param] = decodeURIComponent(item.split(\"=\")[1]);\n    } else if (param == \"channel\") {\n        CHAT_CHANNEL = decodeURIComponent(item.split(\"=\")[1]);\n    } else if (param == \"workbranch\") {\n        WORKBRANCH = decodeURIComponent(item.split(\"=\")[1]);\n    }\n});\nif (CURRENT_USER.name === undefined || CURRENT_USER.uid === undefined) {\n    CURRENT_USER = undefined;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvZGVmaW5lLXVzZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvZGVmaW5lLXVzZXIuanM/OTBjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQ1VSUkVOVF9VU0VSID0ge31cbnZhciBDSEFUX0NIQU5ORUwgPSBcImdsb2JhbFwiO1xudmFyIFdPUktCUkFOQ0ggPSBcImV0ZXJuYWdhbWUub3JnXCI7XG5cbmxvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdChcIiZcIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICB2YXIgcGFyYW0gPSBpdGVtLnNwbGl0KFwiPVwiKVswXTtcbiAgICBpZiAocGFyYW0gPT0gXCJuYW1lXCIgfHwgcGFyYW0gPT0gXCJ1aWRcIikge1xuICAgICAgICBDVVJSRU5UX1VTRVJbcGFyYW1dID0gZGVjb2RlVVJJQ29tcG9uZW50KGl0ZW0uc3BsaXQoXCI9XCIpWzFdKTtcbiAgICB9IGVsc2UgaWYgKHBhcmFtID09IFwiY2hhbm5lbFwiKSB7XG4gICAgICAgIENIQVRfQ0hBTk5FTCA9IGRlY29kZVVSSUNvbXBvbmVudChpdGVtLnNwbGl0KFwiPVwiKVsxXSk7XG4gICAgfSBlbHNlIGlmIChwYXJhbSA9PSBcIndvcmticmFuY2hcIikge1xuICAgICAgICBXT1JLQlJBTkNIID0gZGVjb2RlVVJJQ29tcG9uZW50KGl0ZW0uc3BsaXQoXCI9XCIpWzFdKTtcbiAgICB9XG59KTtcbmlmIChDVVJSRU5UX1VTRVIubmFtZSA9PT0gdW5kZWZpbmVkIHx8IENVUlJFTlRfVVNFUi51aWQgPT09IHVuZGVmaW5lZCkge1xuICAgIENVUlJFTlRfVVNFUiA9IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IHtDSEFUX0NIQU5ORUwsIENVUlJFTlRfVVNFUiwgV09SS0JSQU5DSH1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL2RlZmluZS11c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAuL3NyYy9qcy9kZWZpbmUtdXNlci5qc1xuLy8gbW9kdWxlIGNodW5rcyA9IDEiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/define-user.js\n");

/***/ }),

/***/ "./src/js/polyfills.js":
/***/ (function(module, exports) {

eval("// String.startsWith\nif (!String.prototype.startsWith) {String.prototype.startsWith = function(s, p){p = p || 0;return this.substr(p, s.length) === s;};}\n// Array.includes\nif (!Array.prototype.includes) {Array.prototype.includes=function(s){'use strict';var O=Object(this);var len=parseInt(O.length,10)||0;if(len===0){return false;}var n=parseInt(arguments[1],10)||0;var k;if(n>=0){k=n;}else{k=len+n;if(k<0){k=0;}}var c;while(k<len){c=O[k];if(s===c||(s!==s&&c!==c)){return true;}k++;}return false;};}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvcG9seWZpbGxzLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3BvbHlmaWxscy5qcz84MDc3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFN0cmluZy5zdGFydHNXaXRoXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aCkge1N0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aCA9IGZ1bmN0aW9uKHMsIHApe3AgPSBwIHx8IDA7cmV0dXJuIHRoaXMuc3Vic3RyKHAsIHMubGVuZ3RoKSA9PT0gczt9O31cbi8vIEFycmF5LmluY2x1ZGVzXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmNsdWRlcykge0FycmF5LnByb3RvdHlwZS5pbmNsdWRlcz1mdW5jdGlvbihzKXsndXNlIHN0cmljdCc7dmFyIE89T2JqZWN0KHRoaXMpO3ZhciBsZW49cGFyc2VJbnQoTy5sZW5ndGgsMTApfHwwO2lmKGxlbj09PTApe3JldHVybiBmYWxzZTt9dmFyIG49cGFyc2VJbnQoYXJndW1lbnRzWzFdLDEwKXx8MDt2YXIgaztpZihuPj0wKXtrPW47fWVsc2V7az1sZW4rbjtpZihrPDApe2s9MDt9fXZhciBjO3doaWxlKGs8bGVuKXtjPU9ba107aWYocz09PWN8fChzIT09cyYmYyE9PWMpKXtyZXR1cm4gdHJ1ZTt9aysrO31yZXR1cm4gZmFsc2U7fTt9XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvcG9seWZpbGxzLmpzXG4vLyBtb2R1bGUgaWQgPSAuL3NyYy9qcy9wb2x5ZmlsbHMuanNcbi8vIG1vZHVsZSBjaHVua3MgPSAxIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/polyfills.js\n");

/***/ })

},["./src/js/chat.js"]);